"use strict";(self.webpackChunkpropetro_site3d=self.webpackChunkpropetro_site3d||[]).push([[529],{529:function(e,n,o){o.r(n),o.d(n,{default:function(){return N}});var r=o(1413),t=o(9439),i=o(3630),s=o(9324),c=o(2791),u=o(7760),a="Solid1_14",l="Solid1_29",d="Solid1_23",p="Solid1_53",m="A_body",x=o(7543),h=o(5132),f=o(8511),j=o(4956),g=o(2935),v=o(7916),w=o(5410),Z=o(184),b=["anchor"],C=new u.Box3,P=new u.Vector3,S=function(e){var n=e.anchor,o=(0,w.Z)(e,b),t=c.useRef(null),i=c.useRef(null);return c.useEffect((function(){var e,n;null!==(e=t.current)&&void 0!==e&&null!==(n=e.parent)&&void 0!==n&&n.parent&&(i.current=t.current.parent,t.current.parent.parent.add(t.current))}),[]),(0,s.x)((function(){if(i.current){C.setFromObject(i.current),C.getSize(P);var e=i.current.position,o=e.pX,r=e.pY,s=e.pZ;o&&r&&s?t.current.position.set(i.current.position.x+P.x*n[0]/2,i.current.position.y+P.y*n[1]/2,i.current.position.z+P.z*n[2]/2):t.current.position.set(i.current.geometry.boundingBox.min.x+n[0],i.current.geometry.boundingBox.min.y+n[1],i.current.geometry.boundingBox.min.z+n[2])}})),(0,Z.jsx)("group",(0,r.Z)({ref:t},o))};function y(e){var n=Object.assign({},e),o=a,r=l,t=p,i=d,s=m;return(0,Z.jsxs)(Z.Fragment,{children:[n.node.name===o&&n.pump["Engine Load"]?(0,Z.jsx)(S,{anchor:[0,0,0],children:(0,Z.jsx)(j.V,{children:(0,Z.jsxs)("div",{className:"content",children:[(0,Z.jsx)(f.J,{iconName:"LightningBolt"}),n.pump["Engine Load"]+v.Y["Engine Load"]]})})}):null,n.node.name===r&&n.pump["Trans Gear"]?(0,Z.jsx)(S,{anchor:[1,1,1],children:(0,Z.jsx)(j.V,{children:(0,Z.jsxs)("div",{className:"content",children:[(0,Z.jsx)(f.J,{iconName:"Settings"}),n.pump["Trans Gear"]+v.Y["Trans Gear"]]})})}):null,n.node.name===i&&n.pump["Horse Power"]?(0,Z.jsx)(S,{anchor:[0,0,0],children:(0,Z.jsx)(j.V,{children:(0,Z.jsx)("div",{className:"content",children:n.pump["Horse Power"]+v.Y["Calc Horse Power"]})})}):null,n.node.name===t&&n.pump["Pump Rate"]?(0,Z.jsx)(S,{anchor:[0,0,0],children:(0,Z.jsx)(j.V,{children:(0,Z.jsxs)("div",{className:"content",children:[(0,Z.jsx)(f.J,{iconName:"Drop"}),n.pump["Pump Rate"]+v.Y["Pump Rate"]]})})}):null,n.node.name===s?(0,Z.jsx)(g.L,{anchor:[0,0,0],children:(0,Z.jsx)(j.V,{children:(0,Z.jsx)("div",{className:"chassis-content",children:n.pump["Pump Position"]})})}):null]})}function k(e){var n=Object.assign({},e),o=(0,c.useRef)(),i=(0,c.useState)(),s=(0,t.Z)(i,2),u=s[0],a=s[1];(0,x.j)(u,"pointer"),(0,h.o)(o);return"mesh"!==n.node.type.toLowerCase()?(0,Z.jsx)("group",{rotation:n.node.rotation,position:n.node.position,scale:n.node.scale,frustumCulled:!0,children:n.node.children.length>0&&n.node.children.map((function(e,o){return(0,Z.jsx)(k,(0,r.Z)((0,r.Z)({},n),{},{node:e,index:o+n.index}),o+e.name)}))}):"mesh"===n.node.type.toLowerCase()?(0,Z.jsxs)("mesh",{geometry:n.node.geometry,material:n.node.material,rotation:n.node.rotation,position:n.node.position,ref:o,scale:n.node.scale,onPointerOver:function(e){e.stopPropagation(),n.show&&(n.onHover(o),a(!0))},onPointerOut:function(){n.show&&(a(!1),n.onHover(null))},onClick:function(e){e.stopPropagation(),n.show&&(1===e.detail?n.onClick(!0):n.onDoubleClick())},frustumCulled:!0,children:[n.node.children.length>0&&n.node.children.map((function(e,o){return(0,Z.jsx)(k,(0,r.Z)((0,r.Z)({},n),{},{node:e,index:o+n.index}),o+e.name)})),n.isActive||n.isFocussed?(0,Z.jsx)(y,(0,r.Z)({},n)):null]}):void 0}var L=new u.Box3;function N(e){var n=Object.assign({},e),o=(0,c.useRef)();(0,c.useEffect)((function(){L.setFromObject(n.scene)}),[n.scene]);var d=(0,c.useState)(new Set),m=(0,t.Z)(d,2),x=m[0],h=m[1];(0,s.x)((function(){o.current.visible=n.show}));var f=(0,c.useState)(1),j=(0,t.Z)(f,2),g=j[0],v=(j[1],n.pump),w=a,b=p,C=l;return(0,c.useEffect)((function(){var e=setInterval((function(){v["Engine Load"]<30&&(new u.Box3Helper(L,65280).material.linewidth=3)}),500);return function(){return clearInterval(e)}}),[v,g,n,w,b,C]),n.fast?(0,Z.jsx)("group",(0,r.Z)((0,r.Z)({ref:o},n),{},{dispose:null,children:(0,Z.jsx)(i.P,{box:!0,multiple:!0,onChange:function(e){e[0]&&(console.log(e[0]),n.onHover(e[0]),n.onClick(!0))},children:(0,Z.jsx)("primitive",{object:n.scene})})})):(0,Z.jsx)("group",(0,r.Z)((0,r.Z)({ref:o},n),{},{dispose:null,rotateOnAxis:{axis:[0,0,0],angle:1.57},frustumCulled:!0,children:n.scene.children.map((function(e,o){return(0,Z.jsx)(k,(0,r.Z)((0,r.Z)({},n),{},{node:e,index:o,indexSet:x,setIndexSet:h}),o+e.name)}))}))}}}]);
//# sourceMappingURL=529.968adece.chunk.js.map