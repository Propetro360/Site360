"use strict";(self.webpackChunkpropetro_site3d=self.webpackChunkpropetro_site3d||[]).push([[605],{6605:function(n,e,o){o.r(e),o.d(e,{default:function(){return on}});var t=o(9439),r=o(9093),i=o(3655),s=o(4956),c=o(9324),u=o(5226),l=o(2791),a=o(1697),d=o(9192),p=o(1413),f=o(7543),m=o(6006),h=o(7760),x=o(7577),v=o(184);function j(n){var e=Object.assign({},n),o=(0,l.useRef)();return"Group"===e.node.type?(0,v.jsx)("group",{rotation:e.node.rotation,position:e.node.position,scale:e.node.scale,frustumCulled:!0,children:e.node.children.length>0&&e.node.children.map((function(n,o){return(0,v.jsx)(j,(0,p.Z)((0,p.Z)({},e),{},{node:n,index:o}),o+n.name)}))}):(0,v.jsx)("mesh",{geometry:e.node.geometry,material:e.node.material,rotation:e.node.rotation,position:e.node.position,ref:o,raycast:m.l,scale:e.node.scale,onPointerOver:function(n){n.stopPropagation(),e.onHover(o)},onPointerOut:function(n){n.stopPropagation(),e.onHover(null)},onClick:function(n){n.stopPropagation(),e.onHover(o)},children:e.node.children.length>0&&e.node.children.map((function(n,o){return(0,v.jsx)(j,(0,p.Z)((0,p.Z)({},e),{},{node:n,index:o}),o+n.name)}))})}var g=(0,l.forwardRef)((function(n,e){var o=(0,i.L)(n.cloudGlbURL).scene,r=(0,l.useState)(),s=(0,t.Z)(r,2),c=s[0],u=s[1];(0,f.j)(c,"pointer");var a=(0,x.tq)(),d=(0,l.useMemo)((function(){return o.children.forEach((function(e){e.isMesh&&(n.fast||a?e.material=new h.MeshBasicMaterial({color:e.material.color}):e.material=new h.MeshStandardMaterial({color:e.material.color,metalness:1,emissive:1,roughness:.5}))})),o.clone()}),[o.uuid]),m=function(n){n.stopPropagation(),u(!0)},g=function(n){n.stopPropagation(),u(!1)};return n.fast?(0,v.jsx)("group",(0,p.Z)((0,p.Z)({ref:e},n),{},{dispose:null,onPointerOver:m,onPointerOut:g,children:(0,v.jsx)("primitive",{object:d})})):(0,v.jsx)("group",(0,p.Z)((0,p.Z)({ref:e},n),{},{dispose:null,onPointerOver:m,onPointerOut:g,className:"cursor-pointer",children:d.children.map((function(o,t){return(0,v.jsx)(j,(0,p.Z)((0,p.Z)({},n),{},{node:o,index:t,onHover:function(){return n.onHover(e)}}),t+o.name)}))}))})),P=o(3630),Z=o(5132),y=o(8511),C=o(2935),S="Solid3034_60",b="Solid1061",w="Solid3034_49",R="Solid1040",L="Solid3034_36",k=o(7916),M=o(5410),H=["anchor"],E=new h.Box3,B=new h.Vector3,O=function(n){var e=n.anchor,o=(0,M.Z)(n,H),t=l.useRef(null),r=l.useRef(null);return l.useEffect((function(){var n,e;null!==(n=t.current)&&void 0!==n&&null!==(e=n.parent)&&void 0!==e&&e.parent&&(r.current=t.current.parent,t.current.parent.parent.add(t.current))}),[]),(0,c.x)((function(){if(r.current){E.setFromObject(r.current),E.getSize(B);var n=r.current.position,o=n.pX,i=n.pY,s=n.pZ;o&&i&&s?t.current.position.set(r.current.position.x+B.x*e[0]/2,r.current.position.y+B.y*e[1]/2,r.current.position.z+B.z*e[2]/2):t.current.position.set(r.current.geometry.boundingBox.min.x+e[0],r.current.geometry.boundingBox.min.y+e[1],r.current.geometry.boundingBox.min.z+e[2])}})),(0,v.jsx)("group",(0,p.Z)({ref:t},o))};function N(n){var e=Object.assign({},n),o=S,t=b,r=R,i=w,c=L;return(0,v.jsxs)(v.Fragment,{children:[e.node.name===o&&e.pump["Engine Load"]?(0,v.jsx)(O,{anchor:[0,0,0],children:(0,v.jsx)(s.V,{children:(0,v.jsxs)("div",{className:"content",children:[(0,v.jsx)(y.J,{iconName:"LightningBolt"}),e.pump["Engine Load"].toFixed(1)+k.Y["Engine Load"]]})})}):null,e.node.name===t&&e.pump["Trans Gear"]?(0,v.jsx)(C.L,{anchor:[1,1,1],children:(0,v.jsx)(s.V,{children:(0,v.jsxs)("div",{className:"content",children:[(0,v.jsx)(y.J,{iconName:"Settings"}),e.pump["Trans Gear"].toFixed(1)+k.Y["Trans Gear"]]})})}):null,e.node.name===i&&e.pump["Horse Power"]?(0,v.jsx)(O,{anchor:[0,0,0],children:(0,v.jsx)(s.V,{children:(0,v.jsx)("div",{className:"content",children:e.pump["Horse Power"].toFixed(1)+k.Y["Calc Horse Power"]})})}):null,e.node.name===r&&e.pump["Pump Rate"]?(0,v.jsx)(O,{anchor:[0,0,0],children:(0,v.jsx)(s.V,{children:(0,v.jsxs)("div",{className:"content",children:[(0,v.jsx)(y.J,{iconName:"Drop"}),e.pump["Pump Rate"].toFixed(1)+k.Y["Pump Rate"]]})})}):null,e.node.name===c?(0,v.jsx)(O,{anchor:[0,0,0],children:(0,v.jsx)(s.V,{children:(0,v.jsx)("div",{className:"chassis-content",children:e.pump["Pump Position"]})})}):null]})}function z(n){var e=Object.assign({},n),o=(0,l.useRef)(),r=(0,l.useState)(),i=(0,t.Z)(r,2),s=i[0],c=i[1];if((0,f.j)(s,"pointer"),(0,Z.o)(o),!(e.index>400)){return"mesh"!==e.node.type.toLowerCase()?(0,v.jsx)("group",{rotation:e.node.rotation,position:e.node.position,scale:e.node.scale,frustumCulled:!0,children:e.node.children.length>0&&e.node.children.map((function(n,o){return(0,v.jsx)(z,(0,p.Z)((0,p.Z)({},e),{},{node:n,index:o+e.index}),o+n.name)}))}):"mesh"===e.node.type.toLowerCase()?(0,v.jsxs)("mesh",{geometry:e.node.geometry,material:e.node.material,rotation:e.node.rotation,position:e.node.position,ref:o,scale:e.node.scale,onPointerOver:function(n){n.stopPropagation(),e.show&&(e.onHover(o),c(!0))},onPointerOut:function(n){n.stopPropagation(),e.show&&(c(!1),e.onHover(null))},onClick:function(n){n.stopPropagation(),console.log(e.node.name),e.show&&(1===n.detail?e.onClick(!0):e.onDoubleClick())},frustumCulled:!0,children:[e.node.children.length>0&&e.node.children.map((function(n,o){return(0,v.jsx)(z,(0,p.Z)((0,p.Z)({},e),{},{node:n,index:o+e.index}),o+n.name)})),e.isActive&&e.show?(0,v.jsx)(N,(0,p.Z)({},e)):null]}):void 0}}function F(n){var e=Object.assign({},n),o=(0,l.useRef)();return(0,c.x)((function(){o.current.visible=e.show})),e.fast?(0,v.jsx)("group",(0,p.Z)((0,p.Z)({ref:o},e),{},{dispose:null,children:(0,v.jsx)(P.P,{box:!0,multiple:!0,onChange:function(n){n[0]&&(e.onHover(n[0]),e.onClick(!0))},children:(0,v.jsx)("primitive",{object:e.scene})})})):(0,v.jsx)("group",(0,p.Z)((0,p.Z)({ref:o},e),{},{dispose:null,frustumCulled:!0,children:e.scene.children.map((function(n,o){return(0,v.jsx)(z,(0,p.Z)((0,p.Z)({},e),{},{node:n,index:o}),o+n.name)}))}))}var G=o(5647),T=o(3433),A=o(7762),V=o(9577),D=["children","opacity","radius","segments","color"],U=["color","name","connectedTo","position"],_=(0,l.createContext)(),I=(0,l.forwardRef)((function(n,e){var o=n.children,t=n.opacity,r=void 0===t?1:t,i=n.radius,s=void 0===i?.05:i,c=n.segments,u=void 0===c?32:c,l=n.color,a=void 0===l?"#ff1050":l,d=(0,M.Z)(n,D);return(0,v.jsxs)("mesh",(0,p.Z)((0,p.Z)({ref:e},d),{},{children:[(0,v.jsx)("circleGeometry",{args:[s,u]}),(0,v.jsx)("meshBasicMaterial",{transparent:r<1,opacity:r,color:a}),o]}))}));function Y(n){var e=n.children,o=(0,l.useRef)(),r=(0,l.useState)([]),i=(0,t.Z)(r,2),s=i[0],u=i[1],a=(0,l.useMemo)((function(){var n,e=[],o=(0,A.Z)(s);try{var r=function(){var o=n.value;o.connectedTo.map((function(n){return[o.position,n.current.position]})).forEach((function(n){var o=(0,t.Z)(n,2),r=o[0],i=o[1];return e.push({start:r.clone().add({x:.35,y:0,z:0}),end:i.clone().add({x:-.35,y:0,z:0})})}))};for(o.s();!(n=o.n()).done;)r()}catch(i){o.e(i)}finally{o.f()}return e}),[s]);return(0,c.x)((function(n,e){return o.current.children.forEach((function(n){return n.children[0].material.uniforms.dashOffset.value-=10*e}))})),(0,v.jsxs)(_.Provider,{value:u,children:[(0,v.jsx)("group",{ref:o,children:a.map((function(n,e){return(0,v.jsxs)("group",{children:[(0,v.jsx)(V.R,(0,p.Z)((0,p.Z)({},n),{},{color:"white",dashed:!0,dashScale:50,gapSize:20}),e+"Bezier spot"),(0,v.jsx)(V.R,(0,p.Z)((0,p.Z)({},n),{},{color:"red",lineWidth:3,transparent:!0,opacity:.5}),e+"Bezier line")]},e+"Bezier group")}))}),e,a.map((function(n,e){var o=n.start,t=n.end;return(0,v.jsxs)("group",{"position-z":1,children:[(0,v.jsx)(I,{position:o}),(0,v.jsx)(I,{position:t})]},e+"Bezier circle")}))]})}var q=(0,l.forwardRef)((function(n,e){var o=n.color,r=void 0===o?"black":o,i=(n.name,n.connectedTo),s=void 0===i?[]:i,c=n.position,u=void 0===c?[0,0,0]:c,a=(0,M.Z)(n,U),d=(0,l.useContext)(_),f=(0,l.useState)((function(){return(0,G.Z)(h.Vector3,(0,T.Z)(u))})),m=(0,t.Z)(f,1)[0],x=(0,l.useMemo)((function(){return{position:m,connectedTo:s}}),[m,s]);return(0,l.useLayoutEffect)((function(){return d((function(n){return[].concat((0,T.Z)(n),[x])})),function(){d((function(n){return n.filter((function(n){return n!==x}))}))}}),[x,m,d]),(0,v.jsx)(I,(0,p.Z)({ref:e,opacity:.2,radius:.5,color:r,position:m},a))})),J=[0,-Math.PI/2,0],K=[0,Math.PI/2,0],W=[0,-1,-20],X=[15,1,-10],Q=[10,-1,35],$=[0,0,20],nn=[0,1,20],en=[0,Math.PI/2,0];var on=function(n){var e=(0,x.tq)(),o=(0,l.useRef)(null),p=(0,l.useRef)(null),f=(0,l.useRef)(null),m=(0,l.useRef)(null),j=(0,l.useState)(null),P=(0,t.Z)(j,2),Z=P[0],y=P[1],C=(0,l.useState)(null),S=(0,t.Z)(C,2),b=S[0],w=S[1],R=(0,l.useState)(null),L=(0,t.Z)(R,2),k=L[0],M=L[1],H=(0,i.L)(a.d.TRUCK).scene,E=(0,c.w)((function(n){return n.camera})),B=(0,c.w)((function(n){return n.controls})),O=n.pumpsData.length?n.pumpsData:d.r,N=function(n,e){return(0,x.tq)(),{copiedScene:(0,l.useMemo)((function(){var e=[];return n.traverse((function(n){var o;if(n.isMesh){var t,r=n.material,i=null===(o=n.geometry)||void 0===o?void 0:o.boundingSphere.radius;i>10&&i<30&&e.push(n),n.material=i<300?new h.MeshBasicMaterial({color:r.color,reflectivity:1}):new h.MeshStandardMaterial({color:r.color,metalness:1,emissive:1,roughness:null!==(t=r.roughness)&&void 0!==t?t:.5})}else console.log(n)})),e.forEach((function(n){n.removeFromParent()})),n.clone()}),[n.uuid])}}(H),z=N.copiedScene,G=(0,c.w)((function(n){return n.invalidate})),T=function(n){return!k||n["Pump Position"]===k["Pump Position"]};(0,l.useEffect)((function(){k&&n.setSelected(k["Pump Position"])}),[k,n]);var A=function(e){return e["Pump Position"]===n.selected},V=O.length/2,D=Z?[Z]:void 0;return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)(Y,{children:[(0,v.jsx)(l.Suspense,{fallback:null,children:O.map((function(e,o){var r=function(n,e,o){return[n<e?15:-15,0+10*o,e%n*5]}(V,o,k&&e["Pump Position"]===k["Pump Position"]),i=(0,t.Z)(r,3),s=i[0],c=i[1],u=i[2];return(0,v.jsx)(F,{position:[s,c,u],onClick:function(){n.setSelected(e["Pump Position"]),G()},onDoubleClick:function(){if(T(e)){var o;null===B||void 0===B||B.saveState();var t={};t.position=E.position.clone(),t.rotation=E.rotation.clone(),t.controlCenter=null===B||void 0===B||null===(o=B.target)||void 0===o?void 0:o.clone(),w(t),n.setSelected(e["Pump Position"]),M(e),E.position.set(4.5*s,c+9,3*u),G()}},onHover:y,isActive:n.selectionOptions["Select All"]||A(e),show:T(e),isFocussed:k&&e["Pump Position"]===k["Pump Position"],scene:z,pump:e,setAlertedParts:n.setAlertedParts,rotation:V<o?J:K,cloudGlbURL:a.d.TRUCK,scale:k?2:1},e["Pump Position"])}))}),k?null:(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(g,{ref:o,cloudGlbURL:a.d.MISSILE,assetId:4347,onClick:function(n){return null},onHover:y,position:$}),(0,v.jsx)(q,{ref:p,name:"missile",position:nn,connectedTo:[f]}),(0,v.jsx)(g,{ref:f,cloudGlbURL:a.d.WELL_HEAD,onClick:function(n){return null},onHover:y,position:W,scale:5}),(0,v.jsx)(g,{ref:m,cloudGlbURL:a.d.DATA_VAN,onClick:function(n){return null},onHover:y,position:X,rotation:en})]}),e||k?null:(0,v.jsx)(g,{cloudGlbURL:a.d.BLENDER,onClick:function(n){return null},fast:!0,onHover:y,position:Q,rotation:K})]}),(0,v.jsx)(u.xC,{multisampling:8,autoClear:!1,children:(0,v.jsx)(u.bw,{selection:D,selectionLayer:1,visibleEdgeColor:"white",edgeStrength:5})}),(0,v.jsx)(s.V,{left:!0,portal:n.domNodeRef,children:k?(0,v.jsx)("div",{children:(0,v.jsx)(r.h,{className:"text-neutralPrimary bg-themeLighterAlt",iconProps:{iconName:"Back"},onClick:function(){M(null),E.position.set(b.position.x,b.position.y,b.position.z),null===B||void 0===B||B.reset(),G(),G()},text:"Back to Frac site"})}):null})]})}}}]);
//# sourceMappingURL=605.fc0cd6be.chunk.js.map