"use strict";(self.webpackChunkpropetro_site3d=self.webpackChunkpropetro_site3d||[]).push([[810],{3810:function(e,n,o){o.r(n),o.d(n,{default:function(){return A}});var r=o(9439),t=o(9093),i=o(3655),s=o(4956),u=o(9324),c=o(5226),l=o(2791),a=o(1697),d=o(9192),f=o(4584),p=o(7577),h=o(5647),v=o(3433),m=o(7762),x=o(1413),j=o(5410),g=o(9577),Z=o(7760),y=o(184),R=["children","opacity","radius","segments","color"],S=["color","name","connectedTo","position"],b=(0,l.createContext)(),k=(0,l.forwardRef)((function(e,n){var o=e.children,r=e.opacity,t=void 0===r?1:r,i=e.radius,s=void 0===i?.05:i,u=e.segments,c=void 0===u?32:u,l=e.color,a=void 0===l?"#ff1050":l,d=(0,j.Z)(e,R);return(0,y.jsxs)("mesh",(0,x.Z)((0,x.Z)({ref:n},d),{},{children:[(0,y.jsx)("circleGeometry",{args:[s,c]}),(0,y.jsx)("meshBasicMaterial",{transparent:t<1,opacity:t,color:a}),o]}))}));function C(e){var n=e.children,o=(0,l.useRef)(),t=(0,l.useState)([]),i=(0,r.Z)(t,2),s=i[0],c=i[1],a=(0,l.useMemo)((function(){var e,n=[],o=(0,m.Z)(s);try{var t=function(){var o=e.value;o.connectedTo.map((function(e){return[o.position,e.current.position]})).forEach((function(e){var o=(0,r.Z)(e,2),t=o[0],i=o[1];return n.push({start:t.clone().add({x:.35,y:0,z:0}),end:i.clone().add({x:-.35,y:0,z:0})})}))};for(o.s();!(e=o.n()).done;)t()}catch(i){o.e(i)}finally{o.f()}return n}),[s]);return(0,u.x)((function(e,n){return o.current.children.forEach((function(e){return e.children[0].material.uniforms.dashOffset.value-=10*n}))})),(0,y.jsxs)(b.Provider,{value:c,children:[(0,y.jsx)("group",{ref:o,children:a.map((function(e,n){return(0,y.jsxs)("group",{children:[(0,y.jsx)(g.R,(0,x.Z)((0,x.Z)({},e),{},{color:"white",dashed:!0,dashScale:50,gapSize:20}),n+"Bezier spot"),(0,y.jsx)(g.R,(0,x.Z)((0,x.Z)({},e),{},{color:"red",lineWidth:3,transparent:!0,opacity:.5}),n+"Bezier line")]},n+"Bezier group")}))}),n,a.map((function(e,n){var o=e.start,r=e.end;return(0,y.jsxs)("group",{"position-z":1,children:[(0,y.jsx)(k,{position:o}),(0,y.jsx)(k,{position:r})]},n+"Bezier circle")}))]})}var M=(0,l.forwardRef)((function(e,n){var o=e.color,t=void 0===o?"black":o,i=(e.name,e.connectedTo),s=void 0===i?[]:i,u=e.position,c=void 0===u?[0,0,0]:u,a=(0,j.Z)(e,S),d=(0,l.useContext)(b),f=(0,l.useState)((function(){return(0,h.Z)(Z.Vector3,(0,v.Z)(c))})),p=(0,r.Z)(f,1)[0],m=(0,l.useMemo)((function(){return{position:p,connectedTo:s}}),[p,s]);return(0,l.useLayoutEffect)((function(){return d((function(e){return[].concat((0,v.Z)(e),[m])})),function(){d((function(e){return e.filter((function(e){return e!==m}))}))}}),[m,p,d]),(0,y.jsx)(k,(0,x.Z)({ref:n,opacity:.2,radius:.5,color:t,position:p},a))})),w=(Math.PI,[0,Math.PI/2,0]),L=[0,-1,-20],E=[15,1,-10],z=[10,-1,35],B=[0,0,20],P=[0,1,20],T=[0,Math.PI/2,0],I=(0,l.lazy)((function(){return o.e(276).then(o.bind(o,4276))}));var A=function(e){var n=(0,p.t)(),o=(0,l.useRef)(null),h=(0,l.useRef)(null),v=(0,l.useRef)(null),m=(0,l.useRef)(null),x=(0,l.useState)(null),j=(0,r.Z)(x,2),g=j[0],R=j[1],S=(0,l.useState)(null),b=(0,r.Z)(S,2),k=b[0],A=(b[1],(0,l.useState)(null)),D=(0,r.Z)(A,2),G=D[0],H=D[1],N=(0,i.L)(a.d.TRUCK).scene,U=(0,u.w)((function(e){return e.camera})),F=(0,u.w)((function(e){return e.controls})),_=e.pumpsData.length?e.pumpsData:d.r,V=function(e,n){var o=(0,p.t)();return{copiedScene:(0,l.useMemo)((function(){return e.traverse((function(e){var n;if(e.isMesh){var r,t=e.material,i=null===(n=e.geometry)||void 0===n?void 0:n.boundingSphere.radius;e.material=o||i<200?new Z.MeshBasicMaterial({color:t.color}):new Z.MeshStandardMaterial({color:t.color,metalness:1,emissive:1,roughness:null!==(r=t.roughness)&&void 0!==r?r:.5})}})),[].forEach((function(e){e.removeFromParent()})),e.clone()}),[e.uuid])}}(N),W=(V.copiedScene,(0,u.w)((function(e){return e.invalidate})));(0,l.useEffect)((function(){G&&e.setSelected(G["Pump Position"])}),[G,e]),_.length;var K=g?[g]:void 0;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(C,{children:G?null:(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(I,{ref:o,cloudGlbURL:a.d.MISSILE,assetId:4347,onClick:function(e){return null},onHover:R,position:B}),(0,y.jsx)(M,{ref:h,name:"missile",position:P,connectedTo:[v]}),(0,y.jsx)(I,{ref:v,cloudGlbURL:a.d.WELL_HEAD,onClick:function(e){return null},onHover:R,position:L,scale:5}),(0,y.jsx)(I,{ref:m,cloudGlbURL:a.d.DATA_VAN,onClick:function(e){return null},onHover:R,position:E,rotation:T}),n?null:(0,y.jsx)(l.Suspense,{fallback:(0,y.jsx)(f.Z,{}),children:(0,y.jsx)(I,{cloudGlbURL:a.d.BLENDER,onClick:function(e){return null},fast:!0,onHover:R,position:z,rotation:w})})]})}),(0,y.jsx)(c.xC,{multisampling:8,autoClear:!1,children:(0,y.jsx)(c.bw,{selection:K,selectionLayer:1,visibleEdgeColor:"white",edgeStrength:5})}),(0,y.jsx)(s.V,{left:!0,portal:e.domNodeRef,children:G?(0,y.jsx)("div",{children:(0,y.jsx)(t.h,{className:"text-neutralPrimary bg-themeLighterAlt",iconProps:{iconName:"Back"},onClick:function(){H(null),U.position.set(k.position.x,k.position.y,k.position.z),null===F||void 0===F||F.reset(),W(),W()},text:"Back to Frac site"})}):null})]})}}}]);
//# sourceMappingURL=810.d9bb6da2.chunk.js.map