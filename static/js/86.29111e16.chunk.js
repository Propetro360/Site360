"use strict";(self.webpackChunkpropetro_site3d=self.webpackChunkpropetro_site3d||[]).push([[86],{1086:function(n,e,o){o.r(e),o.d(e,{default:function(){return en}});var r=o(9439),t=o(9093),i=o(1008),s=o(4956),c=o(2274),a=o(9434),l=o(2791),u=o(1697),d=(o(9192),o(6459)),p=o(1413),m=o(7543),f=o(6006),h=o(7760),x=o(7577),j=o(184);function v(n){var e=Object.assign({},((0,d.Z)(n),n)),o=(0,l.useRef)();return"Group"===e.node.type?(0,j.jsx)("group",{rotation:e.node.rotation,position:e.node.position,scale:e.node.scale,frustumCulled:!0,children:e.node.children.length>0&&e.node.children.map((function(n,o){return(0,j.jsx)(v,(0,p.Z)((0,p.Z)({},e),{},{node:n,index:o}),o+n.name)}))}):(0,j.jsx)("mesh",{geometry:e.node.geometry,material:e.node.material,rotation:e.node.rotation,position:e.node.position,ref:o,raycast:f.l,scale:e.node.scale,onPointerOver:function(n){n.stopPropagation(),e.onHover(o)},onPointerOut:function(n){n.stopPropagation(),e.onHover(null)},onClick:function(n){n.stopPropagation(),e.onHover(o)},children:e.node.children.length>0&&e.node.children.map((function(n,o){return(0,j.jsx)(v,(0,p.Z)((0,p.Z)({},e),{},{node:n,index:o}),o+n.name)}))})}var g=(0,l.forwardRef)((function(n,e){var o=(0,i.L)(n.cloudGlbURL).scene,t=(0,l.useState)(),s=(0,r.Z)(t,2),c=s[0],a=s[1];(0,m.j)(c,"pointer");var u=(0,x.tq)(),d=(0,l.useMemo)((function(){return o.children.forEach((function(e){e.isMesh&&(n.fast||u?e.material=new h.MeshBasicMaterial({color:e.material.color}):e.material=new h.MeshStandardMaterial({color:e.material.color,metalness:1,emissive:1,roughness:.5}))})),o.clone()}),[o.uuid]),f=function(n){n.stopPropagation(),a(!0)},g=function(n){n.stopPropagation(),a(!1)};return n.fast?(0,j.jsx)("group",(0,p.Z)((0,p.Z)({ref:e},n),{},{dispose:null,onPointerOver:f,onPointerOut:g,children:(0,j.jsx)("primitive",{object:d})})):(0,j.jsx)("group",(0,p.Z)((0,p.Z)({ref:e},n),{},{dispose:null,onPointerOver:f,onPointerOut:g,className:"cursor-pointer",children:d.children.map((function(o,r){return(0,j.jsx)(v,(0,p.Z)((0,p.Z)({},n),{},{node:o,index:r,onHover:function(){return n.onHover(e)}}),r+o.name)}))}))})),P=o(3630),Z=o(5132),b=o(8511),y=o(2935),R={engine:"Solid1019_10",trans:"trans",fe:"Circle",pe:"Solid1078_1",chassis:"Cylinder001_8"},N=o(7916),C=o(5410),S=["anchor"],w=new h.Box3,L=new h.Vector3,M=function(n){var e=n.anchor,o=(0,C.Z)(n,S),r=l.useRef(null),t=l.useRef(null);return l.useEffect((function(){var n,e;null!==(n=r.current)&&void 0!==n&&null!==(e=n.parent)&&void 0!==e&&e.parent&&(t.current=r.current.parent,r.current.parent.parent.add(r.current))}),[]),(0,c.A)((function(){if(t.current){w.setFromObject(t.current),w.getSize(L);var n=t.current.position,o=n.pX,i=n.pY,s=n.pZ;o&&i&&s?r.current.position.set(t.current.position.x+L.x*e[0]/2,t.current.position.y+L.y*e[1]/2,t.current.position.z+L.z*e[2]/2):r.current.position.set(t.current.geometry.boundingBox.min.x+e[0],t.current.geometry.boundingBox.min.y+e[1],t.current.geometry.boundingBox.min.z+e[2])}})),(0,j.jsx)("group",(0,p.Z)({ref:r},o))};function H(n){var e=Object.assign({},((0,d.Z)(n),n)),o=R.engine,r=R.trans,t=R.pe,i=R.fe,c=R.chassis;return(0,j.jsxs)(j.Fragment,{children:[e.node.name===o&&e.pump["Engine Load"]?(0,j.jsx)(M,{anchor:[0,0,0],children:(0,j.jsx)(s.V,{children:(0,j.jsxs)("div",{className:"engine-content",children:[(0,j.jsx)(b.J,{iconName:"AdminELogoInverse32"}),Number(e.pump["Engine Load"]).toFixed(1)+N.Y["Engine Load"]]})})}):null,e.node.name===r&&e.pump["Trans Gear"]?(0,j.jsx)(y.L,{anchor:[.5,.5,.5],children:(0,j.jsx)(s.V,{children:(0,j.jsxs)("div",{className:"transGear-content",children:[(0,j.jsx)(b.J,{iconName:"Settings"}),Number(e.pump["Trans Gear"]).toFixed(1)+N.Y["Trans Gear"]]})})}):null,e.node.name===i&&e.pump["Horse Power"]?(0,j.jsx)(M,{anchor:[1,1,1],children:(0,j.jsx)(s.V,{children:(0,j.jsxs)("div",{className:"horsePower-content",children:[(0,j.jsx)(b.J,{iconName:"PowerButton"}),Number(e.pump["Horse Power"]).toFixed(1)+N.Y["Calc Horse Power"]]})})}):null,e.node.name===t&&e.pump["Pump Rate"]?(0,j.jsx)(M,{anchor:[2,2.5,1.5],children:(0,j.jsx)(s.V,{children:(0,j.jsxs)("div",{className:"pumpRate-content",children:[(0,j.jsx)(b.J,{iconName:"Financial"}),Number(e.pump["Pump Rate"]).toFixed(1)+N.Y["Pump Rate"]]})})}):null,e.node.name===c?(0,j.jsx)(M,{anchor:[2,2,2],children:(0,j.jsx)(s.V,{children:(0,j.jsxs)("div",{className:"chassis-content",children:[(0,j.jsx)(b.J,{iconName:"NumberSymbol"}),e.pump["Pump Position"]]})})}):null]})}function O(n){var e=Object.assign({},((0,d.Z)(n),n)),o=(0,l.useRef)(),t=(0,l.useState)(),i=(0,r.Z)(t,2),s=i[0],c=i[1];if((0,m.j)(s,"pointer"),(0,Z.o)(o),!(e.index>400)){return"mesh"!==e.node.type.toLowerCase()?(0,j.jsx)("group",{rotation:e.node.rotation,position:e.node.position,scale:e.node.scale,frustumCulled:!0,children:e.node.children.length>0&&e.node.children.map((function(n,o){return(0,j.jsx)(O,(0,p.Z)((0,p.Z)({},e),{},{node:n,index:o+e.index}),o+n.name)}))}):"mesh"===e.node.type.toLowerCase()?(0,j.jsxs)("mesh",{geometry:e.node.geometry,material:e.node.material,rotation:e.node.rotation,position:e.node.position,ref:o,scale:e.node.scale,onPointerOver:function(n){n.stopPropagation(),e.show&&(e.onHover(o),c(!0))},onPointerOut:function(n){n.stopPropagation(),e.show&&(c(!1),e.onHover(null))},onClick:function(n){n.stopPropagation(),console.log(e.node.name),e.show&&(1===n.detail?e.onClick(!0):e.onDoubleClick())},frustumCulled:!0,children:[e.node.children.length>0&&e.node.children.map((function(n,o){return(0,j.jsx)(O,(0,p.Z)((0,p.Z)({},e),{},{node:n,index:o+e.index}),o+n.name)})),e.isActive&&e.show?(0,j.jsx)(H,(0,p.Z)({},e)):null]}):void 0}}function k(n){var e=Object.assign({},((0,d.Z)(n),n)),o=(0,l.useRef)();return(0,c.A)((function(){o.current.visible=e.show})),e.fast?(0,j.jsx)("group",(0,p.Z)((0,p.Z)({ref:o},e),{},{dispose:null,children:(0,j.jsx)(P.P,{box:!0,multiple:!0,onChange:function(n){n[0]&&(e.onHover(n[0]),e.onClick(!0))},children:(0,j.jsx)("primitive",{object:e.scene})})})):(0,j.jsx)("group",(0,p.Z)((0,p.Z)({ref:o},e),{},{dispose:null,frustumCulled:!0,children:e.scene.children.map((function(n,o){return(0,j.jsx)(O,(0,p.Z)((0,p.Z)({},e),{},{node:n,index:o}),o+n.name)}))}))}var E=o(5647),A=o(3433),z=o(7762),B=o(9577),G=["children","opacity","radius","segments","color"],V=["color","name","connectedTo","position"],F=(0,l.createContext)(),_=(0,l.forwardRef)((function(n,e){var o=n.children,r=n.opacity,t=void 0===r?1:r,i=n.radius,s=void 0===i?.05:i,c=n.segments,a=void 0===c?32:c,l=n.color,u=void 0===l?"#ff1050":l,d=(0,C.Z)(n,G);return(0,j.jsxs)("mesh",(0,p.Z)((0,p.Z)({ref:e},d),{},{children:[(0,j.jsx)("circleGeometry",{args:[s,a]}),(0,j.jsx)("meshBasicMaterial",{transparent:t<1,opacity:t,color:u}),o]}))}));function J(n){var e=n.children,o=(0,l.useRef)(),t=(0,l.useState)([]),i=(0,r.Z)(t,2),s=i[0],a=i[1],u=(0,l.useMemo)((function(){var n,e=[],o=(0,z.Z)(s);try{var t=function(){var o=n.value;o.connectedTo.map((function(n){return[o.position,n.current.position]})).forEach((function(n){var o=(0,r.Z)(n,2),t=o[0],i=o[1];return e.push({start:t.clone().add({x:.35,y:0,z:0}),end:i.clone().add({x:-.35,y:0,z:0})})}))};for(o.s();!(n=o.n()).done;)t()}catch(i){o.e(i)}finally{o.f()}return e}),[s]);return(0,c.A)((function(n,e){return o.current.children.forEach((function(n){return n.children[0].material.uniforms.dashOffset.value-=10*e}))})),(0,j.jsxs)(F.Provider,{value:a,children:[(0,j.jsx)("group",{ref:o,children:u.map((function(n,e){return(0,j.jsxs)("group",{children:[(0,j.jsx)(B.R,(0,p.Z)((0,p.Z)({},n),{},{color:"white",dashed:!0,dashScale:50,gapSize:20}),e+"Bezier spot"),(0,j.jsx)(B.R,(0,p.Z)((0,p.Z)({},n),{},{color:"red",lineWidth:3,transparent:!0,opacity:.5}),e+"Bezier line")]},e+"Bezier group")}))}),e,u.map((function(n,e){var o=n.start,r=n.end;return(0,j.jsxs)("group",{"position-z":1,children:[(0,j.jsx)(_,{position:o}),(0,j.jsx)(_,{position:r})]},e+"Bezier circle")}))]})}var T=(0,l.forwardRef)((function(n,e){var o=n.color,t=void 0===o?"black":o,i=(n.name,n.connectedTo),s=void 0===i?[]:i,c=n.position,a=void 0===c?[0,0,0]:c,u=(0,C.Z)(n,V),d=(0,l.useContext)(F),m=(0,l.useState)((function(){return(0,E.Z)(h.Vector3,(0,A.Z)(a))})),f=(0,r.Z)(m,1)[0],x=(0,l.useMemo)((function(){return{position:f,connectedTo:s}}),[f,s]);return(0,l.useLayoutEffect)((function(){return d((function(n){return[].concat((0,A.Z)(n),[x])})),function(){d((function(n){return n.filter((function(n){return n!==x}))}))}}),[x,f,d]),(0,j.jsx)(_,(0,p.Z)({ref:e,opacity:.2,radius:.5,color:t,position:f},u))})),U=[0,Math.PI/2,0],I=[0,-Math.PI/2,0],D=[0,3,-10],Y=[30,4.9,-6],q=[8,3,60],W=[0,3,30],K=[-.4,4.2,25],X=[0,Math.PI/1,0];Math.PI;function Q(n){Object.assign({},((0,d.Z)(n),n));return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(y.L,{anchor:[-3.5,1.25,0],children:(0,j.jsx)(s.V,{children:(0,j.jsxs)("div",{className:"sand_concentration",children:[(0,j.jsx)(b.J,{iconName:"HourGlass"}),"453"]})})}),(0,j.jsx)(y.L,{anchor:[.75,1.25,0],children:(0,j.jsx)(s.V,{children:(0,j.jsxs)("div",{className:"total_rate",children:[(0,j.jsx)(b.J,{iconName:"Settings"}),"5426"]})})}),(0,j.jsx)(y.L,{anchor:[-3.5,2,0],children:(0,j.jsx)(s.V,{children:(0,j.jsxs)("div",{className:"pressure_one",children:[(0,j.jsx)(b.J,{iconName:"AutoRacing"}),"77"]})})}),(0,j.jsx)(y.L,{anchor:[.75,2,0],children:(0,j.jsx)(s.V,{children:(0,j.jsxs)("div",{className:"pressure_two",children:[(0,j.jsx)(b.J,{iconName:"AutoRacing"}),"74"]})})}),(0,j.jsx)(y.L,{anchor:[-3.5,.5,0],children:(0,j.jsx)(s.V,{children:(0,j.jsxs)("div",{className:"pressure_three",children:[(0,j.jsx)(b.J,{iconName:"AutoRacing"}),"81"]})})}),(0,j.jsx)(y.L,{anchor:[.75,.5,0],children:(0,j.jsx)(s.V,{children:(0,j.jsxs)("div",{className:"pressure_four",children:[(0,j.jsx)(b.J,{iconName:"AutoRacing"}),"87"]})})})]})}function $(n){var e=Object.assign({},((0,d.Z)(n),n)),o=(0,l.useRef)();return"Group"===e.node.type?(0,j.jsx)("group",{rotation:e.node.rotation,position:e.node.position,scale:e.node.scale,frustumCulled:!0,children:e.node.children.length>0&&e.node.children.map((function(n,o){return(0,j.jsx)($,(0,p.Z)((0,p.Z)({},e),{},{node:n,index:o}),o+n.name)}))}):(0,j.jsx)("mesh",{geometry:e.node.geometry,material:e.node.material,rotation:e.node.rotation,position:e.node.position,ref:o,raycast:f.l,scale:e.node.scale,onPointerOver:function(n){n.stopPropagation(),e.onHover(o)},onPointerOut:function(n){n.stopPropagation(),e.onHover(null)},onClick:function(n){n.stopPropagation(),e.onHover(o)},children:e.node.children.length>0&&e.node.children.map((function(n,o){return(0,j.jsx)($,(0,p.Z)((0,p.Z)({},e),{},{node:n,index:o}),o+n.name)}))})}var nn=(0,l.forwardRef)((function(n,e){var o=(0,i.L)(n.cloudGlbURL).scene,t=(0,l.useState)(),s=(0,r.Z)(t,2),c=s[0],a=s[1];(0,m.j)(c,"pointer");var u=(0,x.tq)(),d=(0,l.useMemo)((function(){return o.children.forEach((function(e){e.isMesh&&(n.fast||u?e.material=new h.MeshBasicMaterial({color:e.material.color}):e.material=new h.MeshStandardMaterial({color:e.material.color,metalness:1,emissive:1,roughness:.5}))})),o.clone()}),[o.uuid]),f=function(n){n.stopPropagation(),a(!0)},v=function(n){n.stopPropagation(),a(!1)};return n.fast?(0,j.jsx)("group",(0,p.Z)((0,p.Z)({ref:e},n),{},{dispose:null,onPointerOver:f,onPointerOut:v,children:(0,j.jsx)("primitive",{object:d})})):(0,j.jsxs)("group",(0,p.Z)((0,p.Z)({ref:e},n),{},{dispose:null,onPointerOver:f,onPointerOut:v,className:"cursor-pointer",children:[d.children.map((function(o,r){return(0,j.jsx)($,(0,p.Z)((0,p.Z)({},n),{},{node:o,index:r,onHover:function(){return n.onHover(e)}}),r+o.name)})),(0,j.jsx)(Q,{})]}))}));var en=function(n){var e=(0,x.tq)(),o=(0,l.useRef)(null),d=(0,l.useRef)(null),p=(0,l.useRef)(null),m=(0,l.useRef)(null),f=(0,l.useState)(null),v=(0,r.Z)(f,2),P=v[0],Z=v[1],b=(0,l.useState)(null),y=(0,r.Z)(b,2),R=y[0],N=y[1],C=(0,l.useState)(null),S=(0,r.Z)(C,2),w=S[0],L=S[1],M=(0,i.L)(u.d.TRUCK).scene,H=(0,c.z)((function(n){return n.camera})),O=(0,c.z)((function(n){return n.controls})),E=(0,l.useState)([]),A=(0,r.Z)(E,2),z=A[0],B=A[1],G=function(n,e){return(0,x.tq)(),{copiedScene:(0,l.useMemo)((function(){var e=[];return n.traverse((function(n){var o;if(n.isMesh){var r,t=n.material,i=null===(o=n.geometry)||void 0===o?void 0:o.boundingSphere.radius;i>10&&i<30&&e.push(n),n.material=i<300?new h.MeshBasicMaterial({color:t.color,reflectivity:1}):new h.MeshStandardMaterial({color:t.color,metalness:1,emissive:1,roughness:null!==(r=t.roughness)&&void 0!==r?r:.5})}})),e.forEach((function(n){n.removeFromParent()})),n.clone()}),[n.uuid])}}(M).copiedScene,V=(0,c.z)((function(n){return n.invalidate})),F=function(n){return!w||n["Pump Position"]===w["Pump Position"]};(0,l.useEffect)((function(){w&&n.setSelected(w["Pump Position"])}),[w,n]),console.log(n.pumpsData),(0,l.useEffect)((function(){B(n.pumpsData)}),[]);var _=function(e){return e["Pump Position"]===n.selected},Q=Math.floor(z.length/2),$=P?[P]:void 0;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(J,{children:[(0,j.jsx)(l.Suspense,{fallback:null,children:z.map((function(e,o){var t=function(n,e,o){return[n<=e?18:-18,3+10*o,e%n*5]}(Q,o,w&&e["Pump Position"]===w["Pump Position"]),i=(0,r.Z)(t,3),s=i[0],c=i[1],a=i[2];return(0,j.jsx)(k,{position:[s,c,a],onClick:function(){n.setSelected(e["Pump Position"]),V()},onDoubleClick:function(){if(F(e)){var o;null===O||void 0===O||O.saveState();var r={};r.position=H.position.clone(),r.rotation=H.rotation.clone(),r.controlCenter=null===O||void 0===O||null===(o=O.target)||void 0===o?void 0:o.clone(),N(r),n.setSelected(e["Pump Position"]),L(e),H.position.set(4.5*s,c+9,3*a),V()}},onHover:Z,isActive:n.selectionOptions["Select All"]||_(e),show:F(e),isFocussed:w&&e["Pump Position"]===w["Pump Position"],scene:G.clone(),pump:e,setAlertedParts:n.setAlertedParts,rotation:Q<=o?U:I,cloudGlbURL:u.d.TRUCK,scale:w?2:1},e["Pump Position"]+"NEW")}))}),w?null:(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(g,{ref:o,cloudGlbURL:u.d.MISSILE,assetId:4347,onClick:function(n){return null},onHover:Z,position:W}),(0,j.jsx)(T,{ref:d,name:"missile",position:K,connectedTo:[p]}),(0,j.jsx)(nn,{ref:p,cloudGlbURL:u.d.WELL_HEAD,onClick:function(n){return null},onHover:Z,position:D,scale:5}),(0,j.jsx)(g,{ref:m,cloudGlbURL:u.d.DATA_VAN,onClick:function(n){return null},onHover:Z,position:Y,rotation:X})]}),e||w?null:(0,j.jsx)(g,{cloudGlbURL:u.d.BLENDER,onClick:function(n){return null},fast:!0,onHover:Z,position:q,rotation:U})]}),(0,j.jsx)(a.xC,{multisampling:8,autoClear:!1,children:(0,j.jsx)(a.bw,{selection:$,selectionLayer:1,visibleEdgeColor:"white",edgeStrength:5})}),(0,j.jsx)(s.V,{left:!0,portal:n.domNodeRef,children:w?(0,j.jsx)("div",{children:(0,j.jsx)(t.h,{className:"text-neutralPrimary bg-themeLighterAlt",iconProps:{iconName:"Back"},onClick:function(){L(null),H.position.set(R.position.x,R.position.y,R.position.z),null===O||void 0===O||O.reset(),V(),V()},text:"Back to Frac site"})}):null})]})}}}]);
//# sourceMappingURL=86.29111e16.chunk.js.map