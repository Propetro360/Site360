{"version":3,"file":"static/js/98.7a7b35c3.chunk.js","mappings":"iOAAaA,EACH,YADGA,EAEJ,YAFIA,EAGP,YAHOA,EAIP,YAJOA,EAKF,S,kDCLEC,EAIE,OAJFA,EASI,KATJA,EAaS,MAbTA,EAgBG,I,gCCZVC,EAAc,IAAIC,EAAAA,KAClBC,EAAkB,IAAIC,EAAAA,QAEfC,EAAW,SAAC,GAA0B,IAAxBC,EAAuB,EAAvBA,OAAWC,GAAY,YAC1CC,EAAMC,EAAAA,OAAa,MACnBC,EAAYD,EAAAA,OAAa,MAiC/B,OA5BAA,EAAAA,WAAgB,WAAO,IAAD,IACpB,UAAID,EAAIG,eAAR,iBAAI,EAAaC,cAAjB,OAAI,EAAqBA,SACvBF,EAAUC,QAAUH,EAAIG,QAAQC,OAChCJ,EAAIG,QAAQC,OAAOA,OAAOC,IAAIL,EAAIG,YAEnC,KAEHG,EAAAA,EAAAA,IAAS,WACP,GAAIJ,EAAUC,QAAS,CACrBV,EAAYc,cAAcL,EAAUC,SACpCV,EAAYe,QAAQb,GACpB,MAAqBO,EAAUC,QAAQM,SAAjCC,EAAN,EAAMA,GAAIC,EAAV,EAAUA,GAAIC,EAAd,EAAcA,GACVF,GAAMC,GAAMC,EACdZ,EAAIG,QAAQM,SAASI,IACnBX,EAAUC,QAAQM,SAASK,EAAKnB,EAAgBmB,EAAIhB,EAAO,GAAM,EACjEI,EAAUC,QAAQM,SAASM,EAAKpB,EAAgBoB,EAAIjB,EAAO,GAAM,EACjEI,EAAUC,QAAQM,SAASO,EAAKrB,EAAgBqB,EAAIlB,EAAO,GAAM,GAGnEE,EAAIG,QAAQM,SAASI,IACnBX,EAAUC,QAAQc,SAASxB,YAAYyB,IAAIJ,EAAIhB,EAAO,GACtDI,EAAUC,QAAQc,SAASxB,YAAYyB,IAAIH,EAAIjB,EAAO,GACtDI,EAAUC,QAAQc,SAASxB,YAAYyB,IAAIF,EAAIlB,EAAO,SAMvD,0BAAOE,IAAKA,GAASD,KCpCf,SAASoB,EAAT,GAAoC,IAAVpB,EAAS,oBAExCqB,EAAmC7B,EAA3B8B,EAA2B9B,EAApB+B,EAAoB/B,EAAhBgC,EAAgBhC,EAAZiC,EAAYjC,EAK3C,OACE,gCACGQ,EAAM0B,KAAKC,OAASN,GAAUrB,EAAM4B,KAAK,gBACxC,SAAC,EAAD,CAAU7B,OAAQ,CAAC,EAAG,EAAG,GAAzB,UACE,SAAC8B,EAAA,EAAD,WACE,iBAAKC,UAAU,UAAf,WACE,SAACC,EAAA,EAAD,CAAMC,SAAS,kBACdhC,EAAM4B,KAAK,eAAiBnC,SAIjC,KACHO,EAAM0B,KAAKC,OAASL,GAAStB,EAAM4B,KAAK,eACvC,SAAC,EAAD,CAAU7B,OAAQ,CAAC,EAAG,EAAG,GAAzB,UACE,SAAC8B,EAAA,EAAD,WACE,iBAAKC,UAAU,UAAf,WACE,SAACC,EAAA,EAAD,CAAMC,SAAS,aACdhC,EAAM4B,KAAK,cAAgBnC,SAIhC,KACHO,EAAM0B,KAAKC,OAASH,GAAMxB,EAAM4B,KAAK,gBACpC,SAAC,EAAD,CAAU7B,OAAQ,CAAC,EAAG,EAAG,GAAzB,UACE,SAAC8B,EAAA,EAAD,WACE,gBAAKC,UAAU,UAAf,SACG9B,EAAM4B,KAAK,eAAiBnC,QAIjC,KACHO,EAAM0B,KAAKC,OAASJ,GAAMvB,EAAM4B,KAAK,cACpC,SAAC,EAAD,CAAU7B,OAAQ,CAAC,EAAG,EAAG,GAAzB,UACE,SAAC8B,EAAA,EAAD,WACE,iBAAKC,UAAU,UAAf,WACE,SAACC,EAAA,EAAD,CAAMC,SAAS,SAEdhC,EAAM4B,KAAK,aAAenC,SAI/B,KACHO,EAAM0B,KAAKC,OAASF,GACnB,SAAC,IAAD,CAAc1B,OAAQ,CAAC,EAAG,EAAG,GAA7B,UACE,SAAC8B,EAAA,EAAD,WACE,gBAAKC,UAAU,kBAAf,SAAkC9B,EAAM4B,KAAK,uBAG/C,QCxDH,SAASK,EAAT,GAA4C,IAAVjC,EAAS,oBAC1CkC,GAAUC,EAAAA,EAAAA,UAChB,GAAuBC,EAAAA,EAAAA,YAAvB,eAAOC,EAAP,KAAgBvB,EAAhB,MACAwB,EAAAA,EAAAA,GAAUD,EAAS,YACnBE,EAAAA,EAAAA,GAAOL,GAqCP,MAAsC,SAAlClC,EAAM0B,KAAKc,KAAKC,eAEhB,kBACEC,SAAU1C,EAAM0B,KAAKgB,SACrBhC,SAAUV,EAAM0B,KAAKhB,SACrBiC,MAAO3C,EAAM0B,KAAKiB,MAClBC,eAAa,EAJf,SAMG5C,EAAM0B,KAAKmB,SAASC,OAAS,GAC5B9C,EAAM0B,KAAKmB,SAASE,KAAI,SAACC,EAAGC,GAAJ,OACtB,SAAChB,GAAD,kBAEMjC,GAFN,IAGE0B,KAAMsB,EACNE,MAAOD,EAAIjD,EAAMkD,QAHZD,EAAID,EAAErB,WAUe,SAAlC3B,EAAM0B,KAAKc,KAAKC,eAGhB,kBACEvB,SAAUlB,EAAM0B,KAAKR,SACrBiC,SAAUnD,EAAM0B,KAAKyB,SACrBT,SAAU1C,EAAM0B,KAAKgB,SACrBhC,SAAUV,EAAM0B,KAAKhB,SACrBT,IAAKiC,EACLS,MAAO3C,EAAM0B,KAAKiB,MAClBS,cAnEgB,SAACC,GACrBA,EAAEC,kBAEGtD,EAAMuD,OAGXvD,EAAMwD,QAAQtB,GACdpB,GAAI,KA6DA2C,aA1De,WACdzD,EAAMuD,OAGXzC,GAAI,GACJd,EAAMwD,QAAQ,QAsDVE,QAnDU,SAACL,GACfA,EAAEC,kBAEGtD,EAAMuD,MAGXvD,EAAM0D,SAAQ,IA8CVC,cA3CgB,SAACN,GACrBA,EAAEC,kBAEGtD,EAAMuD,MAGXvD,EAAM2D,iBAsCFf,eAAa,EAXf,UAaG5C,EAAM0B,KAAKmB,SAASC,OAAS,GAC5B9C,EAAM0B,KAAKmB,SAASE,KAAI,SAACC,EAAGC,GAAJ,OACtB,SAAChB,GAAD,kBAEMjC,GAFN,IAGE0B,KAAMsB,EACNE,MAAOD,EAAIjD,EAAMkD,QAHZD,EAAID,EAAErB,SAMhB3B,EAAM4D,UAAW,SAACxC,GAAD,UAAiBpB,IAAY,aAzBrD,EC1DF,IAAM6D,EAAc,IAAIlE,EAAAA,KACT,SAASmE,EAAT,GAAuC,IAAV9D,EAAS,oBAC7C+D,GAAQ5B,EAAAA,EAAAA,WAEd6B,EAAAA,EAAAA,YAAU,WACRH,EAAYrD,cAAcR,EAAMiE,SAC/B,CAACjE,EAAMiE,QAEV,OAAgC7B,EAAAA,EAAAA,UAAS,IAAI8B,KAA7C,eAAOC,EAAP,KAAiBC,EAAjB,MAEA7D,EAAAA,EAAAA,IAAS,kBAAOwD,EAAM3D,QAAQiE,QAAUrE,EAAMuD,OAAO,IAErD,OAAoBnB,EAAAA,EAAAA,UAAS,GAA7B,eAAOkC,EAAP,KACMC,GADN,KACcvE,EAAM4B,MAEZP,EAAsB7B,EAAd+B,EAAc/B,EAAV8B,EAAU9B,EAkB9B,OAhBAwE,EAAAA,EAAAA,YAAU,WACR,IAAMQ,EAAWC,aAAY,WACvBF,EAAM,eAAiB,KACR,IAAIG,EAAAA,WAAWb,EAAa,OAClCV,SAASwB,UAAY,KAQjC,KACH,OAAO,kBAAMC,cAAcJ,MAC1B,CAACD,EAAOD,EAAItE,EAAOqB,EAAQE,EAAID,IAE9BtB,EAAM6E,MAEN,kCAAO5E,IAAK8D,GAAW/D,GAAvB,IAA8B8E,QAAS,KAAvC,UACE,SAACC,EAAA,EAAD,CACEC,KAAG,EACHC,UAAQ,EACRC,SAAU,SAACC,GACLA,EAAE,KACJC,QAAQC,IAAIF,EAAE,IACdnF,EAAMwD,QAAQ2B,EAAE,IAChBnF,EAAM0D,SAAQ,KAPpB,UAWE,sBAAW4B,OAAQtF,EAAMiE,cAO/B,kCACEhE,IAAK8D,GACD/D,GAFN,IAGE8E,QAAS,KACTS,aAAc,CAAEC,KAAM,CAAC,EAAG,EAAG,GAAIC,MAAO,MACxC7C,eAAa,EALf,SAOG5C,EAAMiE,MAAMpB,SAASE,KAAI,SAACC,EAAGC,GAAJ,OACxB,SAAChB,GAAD,kBAEMjC,GAFN,IAGE0B,KAAMsB,EACNE,MAAOD,EACPkB,SAAUA,EACVC,YAAaA,IALRnB,EAAID,EAAErB","sources":["config/constants.js","config/unit-mapping.js","shared/bb-anchor.js","shared/truck-cloud-gtlf/truck-params.js","shared/truck-cloud-gtlf/truck-cloud-gtlf-group.js","shared/truck-cloud-gtlf/truck-cloud-gtlf.js"],"sourcesContent":["export const DEFAULT_TRUCK_CONFIG = {\r\n  engine: \"Solid1_14\",\r\n  trans: \"Solid1_29\",\r\n  fe: \"Solid1_23\",\r\n  pe: \"Solid1_53\",\r\n  chassis: \"A_body\",\r\n};\r\n","export const UNIT_MAP = {\r\n  \"Calc Pump Rate\": \" rpm\",\r\n  \"Calc Stroke Rate\": \" Stroke/min\",\r\n  \"Calc Trans RPM\": \" rpm\",\r\n  \"Pump Rate\": \" psi\",\r\n  \"Suction Pressure\": \" psi\",\r\n  \"DUAL FUEL RATIO\": \" %\",\r\n  \"Engine Coolant Temp\": \" degF\",\r\n  \"Engine Hours\": \"  h\",\r\n  \"Engine Load\": \" %\",\r\n  \"Engine Oil Pressure\": \" psi\",\r\n  \"Engine RPM\": \"  rpm\",\r\n  \"FUEL RATE\": \" gal/hr\",\r\n  \"Calc Horse Power\": \" hp\",\r\n  \"PE Oil Pressure\": \" psi\",\r\n  \"PE Oil Temp\": \" degF\",\r\n  \"Trans Gear\": \" \",\r\n  \"Trans Oil Pressure\": \" psi\",\r\n  \"Trans Temp\": \" degF\",\r\n  Voltage: \" V\",\r\n  \"Calc PE RPM\": \" rpm\",\r\n  \"FE Vibration\": \" %\",\r\n};\r\n","import { useFrame } from \"@react-three/fiber\";\r\nimport * as React from \"react\";\r\nimport { Box3, Vector3 } from \"three\";\r\n\r\nconst boundingBox = new Box3();\r\nconst boundingBoxSize = new Vector3();\r\n\r\nexport const BBAnchor = ({ anchor, ...props }) => {\r\n  const ref = React.useRef(null);\r\n  const parentRef = React.useRef(null);\r\n\r\n  // Reattach group created by this component to the parent's parent,\r\n  // so it becomes a sibling of its initial parent.\r\n  // We do that so the children have no impact on a bounding box of a parent.\r\n  React.useEffect(() => {\r\n    if (ref.current?.parent?.parent) {\r\n      parentRef.current = ref.current.parent;\r\n      ref.current.parent.parent.add(ref.current);\r\n    }\r\n  }, []);\r\n\r\n  useFrame(() => {\r\n    if (parentRef.current) {\r\n      boundingBox.setFromObject(parentRef.current);\r\n      boundingBox.getSize(boundingBoxSize);\r\n      let { pX, pY, pZ } = parentRef.current.position;\r\n      if (pX && pY && pZ) {\r\n        ref.current.position.set(\r\n          parentRef.current.position.x + (boundingBoxSize.x * anchor[0]) / 2,\r\n          parentRef.current.position.y + (boundingBoxSize.y * anchor[1]) / 2,\r\n          parentRef.current.position.z + (boundingBoxSize.z * anchor[2]) / 2\r\n        );\r\n      } else {\r\n        ref.current.position.set(\r\n          parentRef.current.geometry.boundingBox.min.x + anchor[0],\r\n          parentRef.current.geometry.boundingBox.min.y + anchor[1],\r\n          parentRef.current.geometry.boundingBox.min.z + anchor[2]\r\n        );\r\n      }\r\n    }\r\n  });\r\n\r\n  return <group ref={ref} {...props} />;\r\n};\r\n","import { Icon } from \"@fluentui/react\";\r\nimport { BBAnchor as DreiBBAnchor, Html } from \"@react-three/drei\";\r\nimport { DEFAULT_TRUCK_CONFIG } from \"../../config/constants\";\r\nimport { UNIT_MAP } from \"../../config/unit-mapping\";\r\nimport { BBAnchor } from \"../bb-anchor\";\r\n\r\nexport default function TruckParams({ ...props }) {\r\n  // const {\r\n  const { engine, trans, pe, fe, chassis } = DEFAULT_TRUCK_CONFIG;\r\n  //   isAllSelected,\r\n  // } = useContext(SiteConfigContext);\r\n  // console.log(engine === props.node.name && props.pump[\"Engine Load\"]);\r\n  // console.log(props.pump[\"Pump Rate\"], props.pump[\"Pump Position\"]);\r\n  return (\r\n    <>\r\n      {props.node.name === engine && props.pump[\"Engine Load\"] ? (\r\n        <BBAnchor anchor={[0, 0, 0]}>\r\n          <Html>\r\n            <div className=\"content\">\r\n              <Icon iconName=\"LightningBolt\" />\r\n              {props.pump[\"Engine Load\"] + UNIT_MAP[\"Engine Load\"]}\r\n            </div>\r\n          </Html>\r\n        </BBAnchor>\r\n      ) : null}\r\n      {props.node.name === trans && props.pump[\"Trans Gear\"] ? (\r\n        <BBAnchor anchor={[1, 1, 1]}>\r\n          <Html>\r\n            <div className=\"content\">\r\n              <Icon iconName=\"Settings\" />\r\n              {props.pump[\"Trans Gear\"] + UNIT_MAP[\"Trans Gear\"]}\r\n            </div>\r\n          </Html>\r\n        </BBAnchor>\r\n      ) : null}\r\n      {props.node.name === fe && props.pump[\"Horse Power\"] ? (\r\n        <BBAnchor anchor={[0, 0, 0]}>\r\n          <Html>\r\n            <div className=\"content\">\r\n              {props.pump[\"Horse Power\"] + UNIT_MAP[\"Calc Horse Power\"]}\r\n            </div>\r\n          </Html>\r\n        </BBAnchor>\r\n      ) : null}\r\n      {props.node.name === pe && props.pump[\"Pump Rate\"] ? (\r\n        <BBAnchor anchor={[0, 0, 0]}>\r\n          <Html>\r\n            <div className=\"content\">\r\n              <Icon iconName=\"Drop\" />\r\n\r\n              {props.pump[\"Pump Rate\"] + UNIT_MAP[\"Pump Rate\"]}\r\n            </div>\r\n          </Html>\r\n        </BBAnchor>\r\n      ) : null}\r\n      {props.node.name === chassis ? (\r\n        <DreiBBAnchor anchor={[0, 0, 0]}>\r\n          <Html>\r\n            <div className=\"chassis-content\">{props.pump[\"Pump Position\"]}</div>\r\n          </Html>\r\n        </DreiBBAnchor>\r\n      ) : null}\r\n    </>\r\n  );\r\n}\r\n","import { useBVH, useCursor } from \"@react-three/drei\";\r\nimport React, { useRef, useState } from \"react\";\r\nimport \"./truck-cloud-gtlf.scss\";\r\nimport TruckParams from \"./truck-params\";\r\n\r\nexport function TruckCloudGTLFGroup({ ...props }) {\r\n  const meshRef = useRef();\r\n  const [hovered, set] = useState();\r\n  useCursor(hovered, \"pointer\");\r\n  useBVH(meshRef);\r\n  const onPointerOver = (e) => {\r\n    e.stopPropagation();\r\n\r\n    if (!props.show) {\r\n      return;\r\n    }\r\n    props.onHover(meshRef);\r\n    set(true);\r\n  };\r\n\r\n  const onPointerOut = () => {\r\n    if (!props.show) {\r\n      return;\r\n    }\r\n    set(false);\r\n    props.onHover(null);\r\n  };\r\n\r\n  const onClick = (e) => {\r\n    e.stopPropagation();\r\n\r\n    if (!props.show) {\r\n      return;\r\n    }\r\n    props.onClick(true);\r\n  };\r\n\r\n  const onDoubleClick = (e) => {\r\n    e.stopPropagation();\r\n\r\n    if (!props.show) {\r\n      return;\r\n    }\r\n    props.onDoubleClick();\r\n  };\r\n\r\n  if (props.node.type.toLowerCase() !== \"mesh\") {\r\n    return (\r\n      <group\r\n        rotation={props.node.rotation}\r\n        position={props.node.position}\r\n        scale={props.node.scale}\r\n        frustumCulled\r\n      >\r\n        {props.node.children.length > 0 &&\r\n          props.node.children.map((_, i) => (\r\n            <TruckCloudGTLFGroup\r\n              key={i + _.name}\r\n              {...props}\r\n              node={_}\r\n              index={i + props.index}\r\n            />\r\n          ))}\r\n      </group>\r\n    );\r\n  }\r\n\r\n  if (props.node.type.toLowerCase() === \"mesh\") {\r\n    // const geometry = new BufferGeometry({ ...props.node.geometry });\r\n    return (\r\n      <mesh\r\n        geometry={props.node.geometry}\r\n        material={props.node.material}\r\n        rotation={props.node.rotation}\r\n        position={props.node.position}\r\n        ref={meshRef}\r\n        scale={props.node.scale}\r\n        onPointerOver={onPointerOver}\r\n        onPointerOut={onPointerOut}\r\n        onClick={onClick}\r\n        onDoubleClick={onDoubleClick}\r\n        frustumCulled\r\n      >\r\n        {props.node.children.length > 0 &&\r\n          props.node.children.map((_, i) => (\r\n            <TruckCloudGTLFGroup\r\n              key={i + _.name}\r\n              {...props}\r\n              node={_}\r\n              index={i + props.index}\r\n            />\r\n          ))}\r\n        {props.isActive ? <TruckParams {...props} /> : null}\r\n      </mesh>\r\n    );\r\n  }\r\n}\r\n","import { Select } from \"@react-three/drei\";\r\nimport { useFrame } from \"@react-three/fiber\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport { Box3, Box3Helper } from \"three\";\r\nimport { DEFAULT_TRUCK_CONFIG } from \"../../config/constants\";\r\nimport { TruckCloudGTLFGroup } from \"./truck-cloud-gtlf-group\";\r\nimport \"./truck-cloud-gtlf.scss\";\r\n// const TRUCK_PARAM_NODES = Object.values(DEFAULT_TRUCK_CONFIG);\r\n\r\nconst highlighter = new Box3();\r\nexport default function TruckCloudGTLF({ ...props }) {\r\n  const group = useRef();\r\n\r\n  useEffect(() => {\r\n    highlighter.setFromObject(props.scene);\r\n  }, [props.scene]);\r\n\r\n  const [indexSet, setIndexSet] = useState(new Set());\r\n\r\n  useFrame(() => (group.current.visible = props.show), []);\r\n\r\n  const [eI, setEI] = useState(1);\r\n  const asset = props.pump;\r\n\r\n  const { engine, pe, trans } = DEFAULT_TRUCK_CONFIG;\r\n\r\n  useEffect(() => {\r\n    const interval = setInterval(() => {\r\n      if (asset[\"Engine Load\"] < 30) {\r\n        var box3Helper = new Box3Helper(highlighter, 0x00ff00);\r\n        box3Helper.material.linewidth = 3;\r\n      }\r\n      // if (asset[\"Horse Power\"] < 1000 && props.node.name === pe) {\r\n      //   group.current.material.emissive.setHex(0xfe8b8b);\r\n      // }\r\n      // if (!asset[\"Trans Gear\"] && props.node.name === trans) {\r\n      //   meshRef.current.material.emissive = 0x3f7b9d;\r\n      // }\r\n    }, 500);\r\n    return () => clearInterval(interval);\r\n  }, [asset, eI, props, engine, pe, trans]);\r\n\r\n  if (props.fast) {\r\n    return (\r\n      <group ref={group} {...props} dispose={null}>\r\n        <Select\r\n          box\r\n          multiple\r\n          onChange={(m) => {\r\n            if (m[0]) {\r\n              console.log(m[0]);\r\n              props.onHover(m[0]);\r\n              props.onClick(true);\r\n            }\r\n          }}\r\n        >\r\n          <primitive object={props.scene} />\r\n        </Select>\r\n      </group>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <group\r\n      ref={group}\r\n      {...props}\r\n      dispose={null}\r\n      rotateOnAxis={{ axis: [0, 0, 0], angle: 3.14 / 2 }}\r\n      frustumCulled\r\n    >\r\n      {props.scene.children.map((_, i) => (\r\n        <TruckCloudGTLFGroup\r\n          key={i + _.name}\r\n          {...props}\r\n          node={_}\r\n          index={i}\r\n          indexSet={indexSet}\r\n          setIndexSet={setIndexSet}\r\n        />\r\n      ))}\r\n    </group>\r\n  );\r\n}\r\n"],"names":["DEFAULT_TRUCK_CONFIG","UNIT_MAP","boundingBox","Box3","boundingBoxSize","Vector3","BBAnchor","anchor","props","ref","React","parentRef","current","parent","add","useFrame","setFromObject","getSize","position","pX","pY","pZ","set","x","y","z","geometry","min","TruckParams","engine","trans","pe","fe","chassis","node","name","pump","Html","className","Icon","iconName","TruckCloudGTLFGroup","meshRef","useRef","useState","hovered","useCursor","useBVH","type","toLowerCase","rotation","scale","frustumCulled","children","length","map","_","i","index","material","onPointerOver","e","stopPropagation","show","onHover","onPointerOut","onClick","onDoubleClick","isActive","highlighter","TruckCloudGTLF","group","useEffect","scene","Set","indexSet","setIndexSet","visible","eI","asset","interval","setInterval","Box3Helper","linewidth","clearInterval","fast","dispose","Select","box","multiple","onChange","m","console","log","object","rotateOnAxis","axis","angle"],"sourceRoot":""}