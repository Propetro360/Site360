{"version":3,"file":"static/js/529.20c1f949.chunk.js","mappings":"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","sources":["config/constants.js","shared/bb-anchor.js","shared/truck-cloud-gtlf/truck-params.js","shared/truck-cloud-gtlf/truck-cloud-gtlf-group.js","shared/truck-cloud-gtlf/truck-cloud-gtlf.js"],"sourcesContent":["export const DEFAULT_TRUCK_CONFIG = {\r\n  engine: \"Solid3034_60\",\r\n  trans: \"Solid1061\",\r\n  fe: \"Solid3034_49\",\r\n  pe: \"Solid1040\",\r\n  chassis: \"Solid3034_36\",\r\n};\r\n","import { useFrame } from \"@react-three/fiber\";\r\nimport * as React from \"react\";\r\nimport { Box3, Vector3 } from \"three\";\r\n\r\nconst boundingBox = new Box3();\r\nconst boundingBoxSize = new Vector3();\r\n\r\nexport const BBAnchor = ({ anchor, ...props }) => {\r\n  const ref = React.useRef(null);\r\n  const parentRef = React.useRef(null);\r\n\r\n  // Reattach group created by this component to the parent's parent,\r\n  // so it becomes a sibling of its initial parent.\r\n  // We do that so the children have no impact on a bounding box of a parent.\r\n  React.useEffect(() => {\r\n    if (ref.current?.parent?.parent) {\r\n      parentRef.current = ref.current.parent;\r\n      ref.current.parent.parent.add(ref.current);\r\n    }\r\n  }, []);\r\n\r\n  useFrame(() => {\r\n    if (parentRef.current) {\r\n      boundingBox.setFromObject(parentRef.current);\r\n      boundingBox.getSize(boundingBoxSize);\r\n      let { pX, pY, pZ } = parentRef.current.position;\r\n      if (pX && pY && pZ) {\r\n        ref.current.position.set(\r\n          parentRef.current.position.x + (boundingBoxSize.x * anchor[0]) / 2,\r\n          parentRef.current.position.y + (boundingBoxSize.y * anchor[1]) / 2,\r\n          parentRef.current.position.z + (boundingBoxSize.z * anchor[2]) / 2\r\n        );\r\n      } else {\r\n        ref.current.position.set(\r\n          parentRef.current.geometry.boundingBox.min.x + anchor[0],\r\n          parentRef.current.geometry.boundingBox.min.y + anchor[1],\r\n          parentRef.current.geometry.boundingBox.min.z + anchor[2]\r\n        );\r\n      }\r\n    }\r\n  });\r\n\r\n  return <group ref={ref} {...props} />;\r\n};\r\n","import { Icon } from \"@fluentui/react\";\r\nimport { BBAnchor as DreiBBAnchor, Html } from \"@react-three/drei\";\r\nimport { DEFAULT_TRUCK_CONFIG } from \"../../config/constants\";\r\nimport { UNIT_MAP } from \"../../config/unit-mapping\";\r\nimport { BBAnchor } from \"../bb-anchor\";\r\n\r\nexport default function TruckParams({ ...props }) {\r\n  // const {\r\n  const { engine, trans, pe, fe, chassis } = DEFAULT_TRUCK_CONFIG;\r\n  //   isAllSelected,\r\n  // } = useContext(SiteConfigContext);\r\n  // console.log(engine === props.node.name && props.pump[\"Engine Load\"]);\r\n  // console.log(props.pump[\"Pump Rate\"], props.pump[\"Pump Position\"]);\r\n  return (\r\n    <>\r\n      {props.node.name === engine && props.pump[\"Engine Load\"] ? (\r\n        <BBAnchor anchor={[0, 0, 0]}>\r\n          <Html>\r\n            <div className=\"content\">\r\n              <Icon iconName=\"LightningBolt\" />\r\n              {props.pump[\"Engine Load\"].toFixed(1) + UNIT_MAP[\"Engine Load\"]}\r\n            </div>\r\n          </Html>\r\n        </BBAnchor>\r\n      ) : null}\r\n      {props.node.name === trans && props.pump[\"Trans Gear\"] ? (\r\n        <DreiBBAnchor anchor={[1, 1, 1]}>\r\n          <Html>\r\n            <div className=\"content\">\r\n              <Icon iconName=\"Settings\" />\r\n              {props.pump[\"Trans Gear\"].toFixed(1) + UNIT_MAP[\"Trans Gear\"]}\r\n            </div>\r\n          </Html>\r\n        </DreiBBAnchor>\r\n      ) : null}\r\n      {props.node.name === fe && props.pump[\"Horse Power\"] ? (\r\n        <BBAnchor anchor={[0, 0, 0]}>\r\n          <Html>\r\n            <div className=\"content\">\r\n              {props.pump[\"Horse Power\"].toFixed(1) +\r\n                UNIT_MAP[\"Calc Horse Power\"]}\r\n            </div>\r\n          </Html>\r\n        </BBAnchor>\r\n      ) : null}\r\n      {props.node.name === pe && props.pump[\"Pump Rate\"] ? (\r\n        <BBAnchor anchor={[0, 0, 0]}>\r\n          <Html>\r\n            <div className=\"content\">\r\n              <Icon iconName=\"Drop\" />\r\n\r\n              {props.pump[\"Pump Rate\"].toFixed(1) + UNIT_MAP[\"Pump Rate\"]}\r\n            </div>\r\n          </Html>\r\n        </BBAnchor>\r\n      ) : null}\r\n      {props.node.name === chassis ? (\r\n        <BBAnchor anchor={[0, 0, 0]}>\r\n          <Html>\r\n            <div className=\"chassis-content\">{props.pump[\"Pump Position\"]}</div>\r\n          </Html>\r\n        </BBAnchor>\r\n      ) : null}\r\n    </>\r\n  );\r\n}\r\n","import { useBVH, useCursor } from \"@react-three/drei\";\r\nimport React, { useRef, useState } from \"react\";\r\nimport \"./truck-cloud-gtlf.scss\";\r\nimport TruckParams from \"./truck-params\";\r\n\r\nexport function TruckCloudGTLFGroup({ ...props }) {\r\n  const meshRef = useRef();\r\n  const [hovered, set] = useState();\r\n  useCursor(hovered, \"pointer\");\r\n  useBVH(meshRef);\r\n  if (props.index > 300) {\r\n    return;\r\n  }\r\n  const onPointerOver = (e) => {\r\n    e.stopPropagation();\r\n\r\n    if (!props.show) {\r\n      return;\r\n    }\r\n    props.onHover(meshRef);\r\n    set(true);\r\n  };\r\n\r\n  const onPointerOut = (e) => {\r\n    e.stopPropagation();\r\n    if (!props.show) {\r\n      return;\r\n    }\r\n    set(false);\r\n    props.onHover(null);\r\n  };\r\n\r\n  const onClick = (e) => {\r\n    e.stopPropagation();\r\n    console.log(props.node.name);\r\n    if (!props.show) {\r\n      return;\r\n    }\r\n    switch (e.detail) {\r\n      case 1: {\r\n        props.onClick(true);\r\n        break;\r\n      }\r\n      default: {\r\n        props.onDoubleClick();\r\n\r\n        break;\r\n      }\r\n    }\r\n  };\r\n\r\n  if (props.node.type.toLowerCase() !== \"mesh\") {\r\n    return (\r\n      <group\r\n        rotation={props.node.rotation}\r\n        position={props.node.position}\r\n        scale={props.node.scale}\r\n        frustumCulled\r\n      >\r\n        {props.node.children.length > 0 &&\r\n          props.node.children.map((_, i) => (\r\n            <TruckCloudGTLFGroup\r\n              key={i + _.name}\r\n              {...props}\r\n              node={_}\r\n              index={i + props.index}\r\n            />\r\n          ))}\r\n      </group>\r\n    );\r\n  }\r\n\r\n  if (props.node.type.toLowerCase() === \"mesh\") {\r\n    // const geometry = new BufferGeometry({ ...props.node.geometry });\r\n    return (\r\n      <mesh\r\n        geometry={props.node.geometry}\r\n        material={props.node.material}\r\n        rotation={props.node.rotation}\r\n        position={props.node.position}\r\n        ref={meshRef}\r\n        scale={props.node.scale}\r\n        onPointerOver={onPointerOver}\r\n        onPointerOut={onPointerOut}\r\n        onClick={onClick}\r\n        frustumCulled\r\n      >\r\n        {props.node.children.length > 0 &&\r\n          props.node.children.map((_, i) => (\r\n            <TruckCloudGTLFGroup\r\n              key={i + _.name}\r\n              {...props}\r\n              node={_}\r\n              index={i + props.index}\r\n            />\r\n          ))}\r\n        {props.isActive && props.show ? <TruckParams {...props} /> : null}\r\n      </mesh>\r\n    );\r\n  }\r\n}\r\n","import { Select } from \"@react-three/drei\";\r\nimport { useFrame } from \"@react-three/fiber\";\r\nimport React, { useRef, useState } from \"react\";\r\nimport { TruckCloudGTLFGroup } from \"./truck-cloud-gtlf-group\";\r\nimport \"./truck-cloud-gtlf.scss\";\r\n\r\nexport default function TruckCloudGTLF({ ...props }) {\r\n  const group = useRef();\r\n\r\n  const [indexSet, setIndexSet] = useState(new Set());\r\n\r\n  useFrame(() => {\r\n    group.current.visible = props.show;\r\n  });\r\n\r\n  if (props.fast) {\r\n    return (\r\n      <group ref={group} {...props} dispose={null}>\r\n        <Select\r\n          box\r\n          multiple\r\n          onChange={(m) => {\r\n            if (m[0]) {\r\n              console.log(m[0]);\r\n              props.onHover(m[0]);\r\n              props.onClick(true);\r\n            }\r\n          }}\r\n        >\r\n          <primitive object={props.scene} />\r\n        </Select>\r\n      </group>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <group ref={group} {...props} dispose={null} frustumCulled>\r\n      {props.scene.children.map((_, i) => (\r\n        <TruckCloudGTLFGroup\r\n          key={i + _.name}\r\n          {...props}\r\n          node={_}\r\n          index={i}\r\n          indexSet={indexSet}\r\n          setIndexSet={setIndexSet}\r\n        />\r\n      ))}\r\n    </group>\r\n  );\r\n}\r\n"],"names":["DEFAULT_TRUCK_CONFIG","boundingBox","Box3","boundingBoxSize","Vector3","BBAnchor","anchor","props","ref","React","parentRef","current","parent","add","useFrame","setFromObject","getSize","position","pX","pY","pZ","set","x","y","z","geometry","min","TruckParams","engine","trans","pe","fe","chassis","node","name","pump","Html","className","Icon","iconName","toFixed","UNIT_MAP","TruckCloudGTLFGroup","meshRef","useRef","useState","hovered","useCursor","useBVH","index","type","toLowerCase","rotation","scale","frustumCulled","children","length","map","_","i","material","onPointerOver","e","stopPropagation","show","onHover","onPointerOut","onClick","console","log","detail","onDoubleClick","isActive","TruckCloudGTLF","group","Set","indexSet","setIndexSet","visible","fast","dispose","Select","box","multiple","onChange","m","object","scene"],"sourceRoot":""}