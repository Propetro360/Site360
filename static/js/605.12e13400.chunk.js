"use strict";(self.webpackChunkpropetro_site3d=self.webpackChunkpropetro_site3d||[]).push([[605],{6605:function(n,e,o){o.r(e),o.d(e,{default:function(){return $}});var t=o(9439),r=o(9093),i=o(1008),s=o(4956),c=o(2274),u=o(9434),l=o(2791),a=o(1697),d=o(9192),p=o(6459),f=o(1413),m=o(7543),h=o(6006),x=o(7760),v=o(7577),j=o(184);function g(n){var e=Object.assign({},((0,p.Z)(n),n)),o=(0,l.useRef)();return"Group"===e.node.type?(0,j.jsx)("group",{rotation:e.node.rotation,position:e.node.position,scale:e.node.scale,frustumCulled:!0,children:e.node.children.length>0&&e.node.children.map((function(n,o){return(0,j.jsx)(g,(0,f.Z)((0,f.Z)({},e),{},{node:n,index:o}),o+n.name)}))}):(0,j.jsx)("mesh",{geometry:e.node.geometry,material:e.node.material,rotation:e.node.rotation,position:e.node.position,ref:o,raycast:h.l,scale:e.node.scale,onPointerOver:function(n){n.stopPropagation(),e.onHover(o)},onPointerOut:function(n){n.stopPropagation(),e.onHover(null)},onClick:function(n){n.stopPropagation(),e.onHover(o)},children:e.node.children.length>0&&e.node.children.map((function(n,o){return(0,j.jsx)(g,(0,f.Z)((0,f.Z)({},e),{},{node:n,index:o}),o+n.name)}))})}var P=(0,l.forwardRef)((function(n,e){var o=(0,i.L)(n.cloudGlbURL).scene,r=(0,l.useState)(),s=(0,t.Z)(r,2),c=s[0],u=s[1];(0,m.j)(c,"pointer");var a=(0,v.tq)(),d=(0,l.useMemo)((function(){return o.children.forEach((function(e){e.isMesh&&(n.fast||a?e.material=new x.MeshBasicMaterial({color:e.material.color}):e.material=new x.MeshStandardMaterial({color:e.material.color,metalness:1,emissive:1,roughness:.5}))})),o.clone()}),[o.uuid]),p=function(n){n.stopPropagation(),u(!0)},h=function(n){n.stopPropagation(),u(!1)};return n.fast?(0,j.jsx)("group",(0,f.Z)((0,f.Z)({ref:e},n),{},{dispose:null,onPointerOver:p,onPointerOut:h,children:(0,j.jsx)("primitive",{object:d})})):(0,j.jsx)("group",(0,f.Z)((0,f.Z)({ref:e},n),{},{dispose:null,onPointerOver:p,onPointerOut:h,className:"cursor-pointer",children:d.children.map((function(o,t){return(0,j.jsx)(g,(0,f.Z)((0,f.Z)({},n),{},{node:o,index:t,onHover:function(){return n.onHover(e)}}),t+o.name)}))}))})),Z=o(3630),y=o(5132),C=o(8511),S=o(2935),b={engine:"Solid3034_60",trans:"Solid1061",fe:"Solid3034_49",pe:"Solid1040",chassis:"Solid3034_36"},R=o(7916),w=o(5410),L=["anchor"],k=new x.Box3,M=new x.Vector3,H=function(n){var e=n.anchor,o=(0,w.Z)(n,L),t=l.useRef(null),r=l.useRef(null);return l.useEffect((function(){var n,e;null!==(n=t.current)&&void 0!==n&&null!==(e=n.parent)&&void 0!==e&&e.parent&&(r.current=t.current.parent,t.current.parent.parent.add(t.current))}),[]),(0,c.A)((function(){if(r.current){k.setFromObject(r.current),k.getSize(M);var n=r.current.position,o=n.pX,i=n.pY,s=n.pZ;o&&i&&s?t.current.position.set(r.current.position.x+M.x*e[0]/2,r.current.position.y+M.y*e[1]/2,r.current.position.z+M.z*e[2]/2):t.current.position.set(r.current.geometry.boundingBox.min.x+e[0],r.current.geometry.boundingBox.min.y+e[1],r.current.geometry.boundingBox.min.z+e[2])}})),(0,j.jsx)("group",(0,f.Z)({ref:t},o))};function z(n){var e=Object.assign({},((0,p.Z)(n),n)),o=b.engine,t=b.trans,r=b.pe,i=b.fe,c=b.chassis;return(0,j.jsxs)(j.Fragment,{children:[e.node.name===o&&e.pump["Engine Load"]?(0,j.jsx)(H,{anchor:[0,0,0],children:(0,j.jsx)(s.V,{children:(0,j.jsxs)("div",{className:"content",children:[(0,j.jsx)(C.J,{iconName:"LightningBolt"}),e.pump["Engine Load"].toFixed(1)+R.Y["Engine Load"]]})})}):null,e.node.name===t&&e.pump["Trans Gear"]?(0,j.jsx)(S.L,{anchor:[1,1,1],children:(0,j.jsx)(s.V,{children:(0,j.jsxs)("div",{className:"content",children:[(0,j.jsx)(C.J,{iconName:"Settings"}),e.pump["Trans Gear"].toFixed(1)+R.Y["Trans Gear"]]})})}):null,e.node.name===i&&e.pump["Horse Power"]?(0,j.jsx)(H,{anchor:[0,0,0],children:(0,j.jsx)(s.V,{children:(0,j.jsx)("div",{className:"content",children:e.pump["Horse Power"].toFixed(1)+R.Y["Calc Horse Power"]})})}):null,e.node.name===r&&e.pump["Pump Rate"]?(0,j.jsx)(H,{anchor:[0,0,0],children:(0,j.jsx)(s.V,{children:(0,j.jsxs)("div",{className:"content",children:[(0,j.jsx)(C.J,{iconName:"Drop"}),e.pump["Pump Rate"].toFixed(1)+R.Y["Pump Rate"]]})})}):null,e.node.name===c?(0,j.jsx)(H,{anchor:[0,0,0],children:(0,j.jsx)(s.V,{children:(0,j.jsx)("div",{className:"chassis-content",children:e.pump["Pump Position"]})})}):null]})}function E(n){var e=Object.assign({},((0,p.Z)(n),n)),o=(0,l.useRef)(),r=(0,l.useState)(),i=(0,t.Z)(r,2),s=i[0],c=i[1];if((0,m.j)(s,"pointer"),(0,y.o)(o),!(e.index>400)){return"mesh"!==e.node.type.toLowerCase()?(0,j.jsx)("group",{rotation:e.node.rotation,position:e.node.position,scale:e.node.scale,frustumCulled:!0,children:e.node.children.length>0&&e.node.children.map((function(n,o){return(0,j.jsx)(E,(0,f.Z)((0,f.Z)({},e),{},{node:n,index:o+e.index}),o+n.name)}))}):"mesh"===e.node.type.toLowerCase()?(0,j.jsxs)("mesh",{geometry:e.node.geometry,material:e.node.material,rotation:e.node.rotation,position:e.node.position,ref:o,scale:e.node.scale,onPointerOver:function(n){n.stopPropagation(),e.show&&(e.onHover(o),c(!0))},onPointerOut:function(n){n.stopPropagation(),e.show&&(c(!1),e.onHover(null))},onClick:function(n){n.stopPropagation(),console.log(e.node.name),e.show&&(1===n.detail?e.onClick(!0):e.onDoubleClick())},frustumCulled:!0,children:[e.node.children.length>0&&e.node.children.map((function(n,o){return(0,j.jsx)(E,(0,f.Z)((0,f.Z)({},e),{},{node:n,index:o+e.index}),o+n.name)})),e.isActive&&e.show?(0,j.jsx)(z,(0,f.Z)({},e)):null]}):void 0}}function B(n){var e=Object.assign({},((0,p.Z)(n),n)),o=(0,l.useRef)();return(0,c.A)((function(){o.current.visible=e.show})),e.fast?(0,j.jsx)("group",(0,f.Z)((0,f.Z)({ref:o},e),{},{dispose:null,children:(0,j.jsx)(Z.P,{box:!0,multiple:!0,onChange:function(n){n[0]&&(e.onHover(n[0]),e.onClick(!0))},children:(0,j.jsx)("primitive",{object:e.scene})})})):(0,j.jsx)("group",(0,f.Z)((0,f.Z)({ref:o},e),{},{dispose:null,frustumCulled:!0,children:e.scene.children.map((function(n,o){return(0,j.jsx)(E,(0,f.Z)((0,f.Z)({},e),{},{node:n,index:o}),o+n.name)}))}))}var O=o(5647),N=o(3433),A=o(7762),F=o(9577),G=["children","opacity","radius","segments","color"],T=["color","name","connectedTo","position"],V=(0,l.createContext)(),D=(0,l.forwardRef)((function(n,e){var o=n.children,t=n.opacity,r=void 0===t?1:t,i=n.radius,s=void 0===i?.05:i,c=n.segments,u=void 0===c?32:c,l=n.color,a=void 0===l?"#ff1050":l,d=(0,w.Z)(n,G);return(0,j.jsxs)("mesh",(0,f.Z)((0,f.Z)({ref:e},d),{},{children:[(0,j.jsx)("circleGeometry",{args:[s,u]}),(0,j.jsx)("meshBasicMaterial",{transparent:r<1,opacity:r,color:a}),o]}))}));function U(n){var e=n.children,o=(0,l.useRef)(),r=(0,l.useState)([]),i=(0,t.Z)(r,2),s=i[0],u=i[1],a=(0,l.useMemo)((function(){var n,e=[],o=(0,A.Z)(s);try{var r=function(){var o=n.value;o.connectedTo.map((function(n){return[o.position,n.current.position]})).forEach((function(n){var o=(0,t.Z)(n,2),r=o[0],i=o[1];return e.push({start:r.clone().add({x:.35,y:0,z:0}),end:i.clone().add({x:-.35,y:0,z:0})})}))};for(o.s();!(n=o.n()).done;)r()}catch(i){o.e(i)}finally{o.f()}return e}),[s]);return(0,c.A)((function(n,e){return o.current.children.forEach((function(n){return n.children[0].material.uniforms.dashOffset.value-=10*e}))})),(0,j.jsxs)(V.Provider,{value:u,children:[(0,j.jsx)("group",{ref:o,children:a.map((function(n,e){return(0,j.jsxs)("group",{children:[(0,j.jsx)(F.R,(0,f.Z)((0,f.Z)({},n),{},{color:"white",dashed:!0,dashScale:50,gapSize:20}),e+"Bezier spot"),(0,j.jsx)(F.R,(0,f.Z)((0,f.Z)({},n),{},{color:"red",lineWidth:3,transparent:!0,opacity:.5}),e+"Bezier line")]},e+"Bezier group")}))}),e,a.map((function(n,e){var o=n.start,t=n.end;return(0,j.jsxs)("group",{"position-z":1,children:[(0,j.jsx)(D,{position:o}),(0,j.jsx)(D,{position:t})]},e+"Bezier circle")}))]})}var _=(0,l.forwardRef)((function(n,e){var o=n.color,r=void 0===o?"black":o,i=(n.name,n.connectedTo),s=void 0===i?[]:i,c=n.position,u=void 0===c?[0,0,0]:c,a=(0,w.Z)(n,T),d=(0,l.useContext)(V),p=(0,l.useState)((function(){return(0,O.Z)(x.Vector3,(0,N.Z)(u))})),m=(0,t.Z)(p,1)[0],h=(0,l.useMemo)((function(){return{position:m,connectedTo:s}}),[m,s]);return(0,l.useLayoutEffect)((function(){return d((function(n){return[].concat((0,N.Z)(n),[h])})),function(){d((function(n){return n.filter((function(n){return n!==h}))}))}}),[h,m,d]),(0,j.jsx)(D,(0,f.Z)({ref:e,opacity:.2,radius:.5,color:r,position:m},a))})),I=[0,-Math.PI/2,0],Y=[0,Math.PI/2,0],q=[0,-1,-20],J=[15,1,-10],K=[10,-1,35],W=[0,0,20],X=[0,1,20],Q=[0,Math.PI/2,0];var $=function(n){var e=(0,v.tq)(),o=(0,l.useRef)(null),p=(0,l.useRef)(null),f=(0,l.useRef)(null),m=(0,l.useRef)(null),h=(0,l.useState)(null),g=(0,t.Z)(h,2),Z=g[0],y=g[1],C=(0,l.useState)(null),S=(0,t.Z)(C,2),b=S[0],R=S[1],w=(0,l.useState)(null),L=(0,t.Z)(w,2),k=L[0],M=L[1],H=(0,i.L)(a.d.TRUCK).scene,z=(0,c.z)((function(n){return n.camera})),E=(0,c.z)((function(n){return n.controls})),O=n.pumpsData.length?n.pumpsData:d.r.slice(0,7),N=function(n,e){return(0,v.tq)(),{copiedScene:(0,l.useMemo)((function(){var e=[];return n.traverse((function(n){var o;if(n.isMesh){var t,r=n.material,i=null===(o=n.geometry)||void 0===o?void 0:o.boundingSphere.radius;i>10&&i<30&&e.push(n),n.material=i<300?new x.MeshBasicMaterial({color:r.color,reflectivity:1}):new x.MeshStandardMaterial({color:r.color,metalness:1,emissive:1,roughness:null!==(t=r.roughness)&&void 0!==t?t:.5})}else console.log(n)})),e.forEach((function(n){n.removeFromParent()})),n.clone()}),[n.uuid])}}(H).copiedScene,A=(0,c.z)((function(n){return n.invalidate})),F=function(n){return!k||n["Pump Position"]===k["Pump Position"]};(0,l.useEffect)((function(){k&&n.setSelected(k["Pump Position"])}),[k,n]);var G=function(e){return e["Pump Position"]===n.selected},T=O.length/2,V=Z?[Z]:void 0;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(U,{children:[(0,j.jsx)(l.Suspense,{fallback:null,children:O.map((function(e,o){var r=function(n,e,o){return[n<e?15:-15,0+10*o,e%n*5]}(T,o,k&&e["Pump Position"]===k["Pump Position"]),i=(0,t.Z)(r,3),s=i[0],c=i[1],u=i[2];return(0,j.jsx)(B,{position:[s,c,u],onClick:function(){n.setSelected(e["Pump Position"]),A()},onDoubleClick:function(){if(F(e)){var o;null===E||void 0===E||E.saveState();var t={};t.position=z.position.clone(),t.rotation=z.rotation.clone(),t.controlCenter=null===E||void 0===E||null===(o=E.target)||void 0===o?void 0:o.clone(),R(t),n.setSelected(e["Pump Position"]),M(e),z.position.set(4.5*s,c+9,3*u),A()}},onHover:y,isActive:n.selectionOptions["Select All"]||G(e),show:F(e),isFocussed:k&&e["Pump Position"]===k["Pump Position"],scene:N,pump:e,setAlertedParts:n.setAlertedParts,rotation:T<o?I:Y,cloudGlbURL:a.d.TRUCK,scale:k?2:1},e["Pump Position"])}))}),k?null:(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(P,{ref:o,cloudGlbURL:a.d.MISSILE,assetId:4347,onClick:function(n){return null},onHover:y,position:W}),(0,j.jsx)(_,{ref:p,name:"missile",position:X,connectedTo:[f]}),(0,j.jsx)(P,{ref:f,cloudGlbURL:a.d.WELL_HEAD,onClick:function(n){return null},onHover:y,position:q,scale:5}),(0,j.jsx)(P,{ref:m,cloudGlbURL:a.d.DATA_VAN,onClick:function(n){return null},onHover:y,position:J,rotation:Q})]}),e||k?null:(0,j.jsx)(P,{cloudGlbURL:a.d.BLENDER,onClick:function(n){return null},fast:!0,onHover:y,position:K,rotation:Y})]}),(0,j.jsx)(u.xC,{multisampling:8,autoClear:!1,children:(0,j.jsx)(u.bw,{selection:V,selectionLayer:1,visibleEdgeColor:"white",edgeStrength:5})}),(0,j.jsx)(s.V,{left:!0,portal:n.domNodeRef,children:k?(0,j.jsx)("div",{children:(0,j.jsx)(r.h,{className:"text-neutralPrimary bg-themeLighterAlt",iconProps:{iconName:"Back"},onClick:function(){M(null),z.position.set(b.position.x,b.position.y,b.position.z),null===E||void 0===E||E.reset(),A(),A()},text:"Back to Frac site"})}):null})]})}}}]);
//# sourceMappingURL=605.12e13400.chunk.js.map