"use strict";(self.webpackChunkpropetro_site3d=self.webpackChunkpropetro_site3d||[]).push([[605],{6605:function(n,e,o){o.r(e),o.d(e,{default:function(){return on}});var t=o(9439),r=o(9093),i=o(3655),s=o(4956),c=o(9324),l=o(5226),u=o(2791),a=o(1697),d=o(9192),p=o(1413),f=o(7543),m=o(6006),h=o(7760),x=o(7577),v=o(184);function j(n){var e=Object.assign({},n),o=(0,u.useRef)();return"Group"===e.node.type?(0,v.jsx)("group",{rotation:e.node.rotation,position:e.node.position,scale:e.node.scale,frustumCulled:!0,children:e.node.children.length>0&&e.node.children.map((function(n,o){return(0,v.jsx)(j,(0,p.Z)((0,p.Z)({},e),{},{node:n,index:o}),o+n.name)}))}):(0,v.jsx)("mesh",{geometry:e.node.geometry,material:e.node.material,rotation:e.node.rotation,position:e.node.position,ref:o,raycast:m.l,scale:e.node.scale,onPointerOver:function(n){n.stopPropagation(),e.onHover(o)},onPointerOut:function(n){n.stopPropagation(),e.onHover(null)},onClick:function(n){n.stopPropagation(),e.onHover(o)},children:e.node.children.length>0&&e.node.children.map((function(n,o){return(0,v.jsx)(j,(0,p.Z)((0,p.Z)({},e),{},{node:n,index:o}),o+n.name)}))})}var g=(0,u.forwardRef)((function(n,e){var o=(0,i.L)(n.cloudGlbURL).scene,r=(0,u.useState)(),s=(0,t.Z)(r,2),c=s[0],l=s[1];(0,f.j)(c,"pointer");var a=(0,x.t)(),d=(0,u.useMemo)((function(){return o.children.forEach((function(e){e.isMesh&&(n.fast||a?e.material=new h.MeshBasicMaterial({color:e.material.color}):e.material=new h.MeshStandardMaterial({color:e.material.color,metalness:1,emissive:1,roughness:.5}))})),o.clone()}),[o.uuid]),m=function(n){n.stopPropagation(),l(!0)},g=function(n){n.stopPropagation(),l(!1)};return n.fast?(0,v.jsx)(u.Suspense,{fallback:null,children:(0,v.jsx)("group",(0,p.Z)((0,p.Z)({ref:e},n),{},{dispose:null,onPointerOver:m,onPointerOut:g,children:(0,v.jsx)("primitive",{object:d})}))}):(0,v.jsx)(u.Suspense,{fallback:null,children:(0,v.jsx)("group",(0,p.Z)((0,p.Z)({ref:e},n),{},{dispose:null,onPointerOver:m,onPointerOut:g,className:"cursor-pointer",children:d.children.map((function(o,t){return(0,v.jsx)(j,(0,p.Z)((0,p.Z)({},n),{},{node:o,index:t,onHover:function(){return n.onHover(e)}}),t+o.name)}))}))})})),P=o(5647),Z=o(3433),S=o(7762),b=o(5410),C=o(9577),w=["children","opacity","radius","segments","color"],y=["color","name","connectedTo","position"],R=(0,u.createContext)(),k=(0,u.forwardRef)((function(n,e){var o=n.children,t=n.opacity,r=void 0===t?1:t,i=n.radius,s=void 0===i?.05:i,c=n.segments,l=void 0===c?32:c,u=n.color,a=void 0===u?"#ff1050":u,d=(0,b.Z)(n,w);return(0,v.jsxs)("mesh",(0,p.Z)((0,p.Z)({ref:e},d),{},{children:[(0,v.jsx)("circleGeometry",{args:[s,l]}),(0,v.jsx)("meshBasicMaterial",{transparent:r<1,opacity:r,color:a}),o]}))}));function L(n){var e=n.children,o=(0,u.useRef)(),r=(0,u.useState)([]),i=(0,t.Z)(r,2),s=i[0],l=i[1],a=(0,u.useMemo)((function(){var n,e=[],o=(0,S.Z)(s);try{var r=function(){var o=n.value;o.connectedTo.map((function(n){return[o.position,n.current.position]})).forEach((function(n){var o=(0,t.Z)(n,2),r=o[0],i=o[1];return e.push({start:r.clone().add({x:.35,y:0,z:0}),end:i.clone().add({x:-.35,y:0,z:0})})}))};for(o.s();!(n=o.n()).done;)r()}catch(i){o.e(i)}finally{o.f()}return e}),[s]);return(0,c.x)((function(n,e){return o.current.children.forEach((function(n){return n.children[0].material.uniforms.dashOffset.value-=10*e}))})),(0,v.jsxs)(R.Provider,{value:l,children:[(0,v.jsx)("group",{ref:o,children:a.map((function(n,e){return(0,v.jsxs)("group",{children:[(0,v.jsx)(C.R,(0,p.Z)((0,p.Z)({},n),{},{color:"white",dashed:!0,dashScale:50,gapSize:20}),e+"Bezier spot"),(0,v.jsx)(C.R,(0,p.Z)((0,p.Z)({},n),{},{color:"red",lineWidth:3,transparent:!0,opacity:.5}),e+"Bezier line")]},e+"Bezier group")}))}),e,a.map((function(n,e){var o=n.start,t=n.end;return(0,v.jsxs)("group",{"position-z":1,children:[(0,v.jsx)(k,{position:o}),(0,v.jsx)(k,{position:t})]},e+"Bezier circle")}))]})}var M=(0,u.forwardRef)((function(n,e){var o=n.color,r=void 0===o?"black":o,i=(n.name,n.connectedTo),s=void 0===i?[]:i,c=n.position,l=void 0===c?[0,0,0]:c,a=(0,b.Z)(n,y),d=(0,u.useContext)(R),f=(0,u.useState)((function(){return(0,P.Z)(h.Vector3,(0,Z.Z)(l))})),m=(0,t.Z)(f,1)[0],x=(0,u.useMemo)((function(){return{position:m,connectedTo:s}}),[m,s]);return(0,u.useLayoutEffect)((function(){return d((function(n){return[].concat((0,Z.Z)(n),[x])})),function(){d((function(n){return n.filter((function(n){return n!==x}))}))}}),[x,m,d]),(0,v.jsx)(k,(0,p.Z)({ref:e,opacity:.2,radius:.5,color:r,position:m},a))})),H=[0,-Math.PI/2,0],E=[0,Math.PI/2,0],B=[0,-1,-20],O=[15,1,-10],N=[10,-1,35],z=[0,0,20],F=[0,1,20],G=[0,Math.PI/2,0],T=o(3630),A=o(5132),V=o(8511),D=o(2935),U="Solid3034_60",I="Solid1061",_="Solid3034_49",Y="Solid1040",J="Solid3034_36",K=o(7916),W=["anchor"],X=new h.Box3,q=new h.Vector3,Q=function(n){var e=n.anchor,o=(0,b.Z)(n,W),t=u.useRef(null),r=u.useRef(null);return u.useEffect((function(){var n,e;null!==(n=t.current)&&void 0!==n&&null!==(e=n.parent)&&void 0!==e&&e.parent&&(r.current=t.current.parent,t.current.parent.parent.add(t.current))}),[]),(0,c.x)((function(){if(r.current){X.setFromObject(r.current),X.getSize(q);var n=r.current.position,o=n.pX,i=n.pY,s=n.pZ;o&&i&&s?t.current.position.set(r.current.position.x+q.x*e[0]/2,r.current.position.y+q.y*e[1]/2,r.current.position.z+q.z*e[2]/2):t.current.position.set(r.current.geometry.boundingBox.min.x+e[0],r.current.geometry.boundingBox.min.y+e[1],r.current.geometry.boundingBox.min.z+e[2])}})),(0,v.jsx)("group",(0,p.Z)({ref:t},o))};function $(n){var e=Object.assign({},n),o=U,t=I,r=Y,i=_,c=J;return(0,v.jsxs)(v.Fragment,{children:[e.node.name===o&&e.pump["Engine Load"]?(0,v.jsx)(Q,{anchor:[0,0,0],children:(0,v.jsx)(s.V,{children:(0,v.jsxs)("div",{className:"content",children:[(0,v.jsx)(V.J,{iconName:"LightningBolt"}),e.pump["Engine Load"].toFixed(1)+K.Y["Engine Load"]]})})}):null,e.node.name===t&&e.pump["Trans Gear"]?(0,v.jsx)(D.L,{anchor:[1,1,1],children:(0,v.jsx)(s.V,{children:(0,v.jsxs)("div",{className:"content",children:[(0,v.jsx)(V.J,{iconName:"Settings"}),e.pump["Trans Gear"].toFixed(1)+K.Y["Trans Gear"]]})})}):null,e.node.name===i&&e.pump["Horse Power"]?(0,v.jsx)(Q,{anchor:[0,0,0],children:(0,v.jsx)(s.V,{children:(0,v.jsx)("div",{className:"content",children:e.pump["Horse Power"].toFixed(1)+K.Y["Calc Horse Power"]})})}):null,e.node.name===r&&e.pump["Pump Rate"]?(0,v.jsx)(Q,{anchor:[0,0,0],children:(0,v.jsx)(s.V,{children:(0,v.jsxs)("div",{className:"content",children:[(0,v.jsx)(V.J,{iconName:"Drop"}),e.pump["Pump Rate"].toFixed(1)+K.Y["Pump Rate"]]})})}):null,e.node.name===c?(0,v.jsx)(Q,{anchor:[0,0,0],children:(0,v.jsx)(s.V,{children:(0,v.jsx)("div",{className:"chassis-content",children:e.pump["Pump Position"]})})}):null]})}function nn(n){var e=Object.assign({},n),o=(0,u.useRef)(),r=(0,u.useState)(),i=(0,t.Z)(r,2),s=i[0],c=i[1];if((0,f.j)(s,"pointer"),(0,A.o)(o),!(e.index>300)){return"mesh"!==e.node.type.toLowerCase()?(0,v.jsx)("group",{rotation:e.node.rotation,position:e.node.position,scale:e.node.scale,frustumCulled:!0,children:e.node.children.length>0&&e.node.children.map((function(n,o){return(0,v.jsx)(nn,(0,p.Z)((0,p.Z)({},e),{},{node:n,index:o+e.index}),o+n.name)}))}):"mesh"===e.node.type.toLowerCase()?(0,v.jsxs)("mesh",{geometry:e.node.geometry,material:e.node.material,rotation:e.node.rotation,position:e.node.position,ref:o,scale:e.node.scale,onPointerOver:function(n){n.stopPropagation(),e.show&&(e.onHover(o),c(!0))},onPointerOut:function(n){n.stopPropagation(),e.show&&(c(!1),e.onHover(null))},onClick:function(n){n.stopPropagation(),console.log(e.node.name),e.show&&(1===n.detail?e.onClick(!0):e.onDoubleClick())},frustumCulled:!0,children:[e.node.children.length>0&&e.node.children.map((function(n,o){return(0,v.jsx)(nn,(0,p.Z)((0,p.Z)({},e),{},{node:n,index:o+e.index}),o+n.name)})),e.isActive&&e.show?(0,v.jsx)($,(0,p.Z)({},e)):null]}):void 0}}function en(n){var e=Object.assign({},n),o=(0,u.useRef)(),r=(0,u.useState)(new Set),i=(0,t.Z)(r,2),s=i[0],l=i[1];return(0,c.x)((function(){o.current.visible=e.show})),e.fast?(0,v.jsx)(u.Suspense,{fallback:null,children:(0,v.jsx)("group",(0,p.Z)((0,p.Z)({ref:o},e),{},{dispose:null,children:(0,v.jsx)(T.P,{box:!0,multiple:!0,onChange:function(n){n[0]&&(e.onHover(n[0]),e.onClick(!0))},children:(0,v.jsx)("primitive",{object:e.scene})})}))}):(0,v.jsx)(u.Suspense,{fallback:null,children:(0,v.jsx)("group",(0,p.Z)((0,p.Z)({ref:o},e),{},{dispose:null,frustumCulled:!0,children:e.scene.children.map((function(n,o){return(0,v.jsx)(nn,(0,p.Z)((0,p.Z)({},e),{},{node:n,index:o,indexSet:s,setIndexSet:l}),o+n.name)}))}))})}var on=function(n){var e=(0,x.t)(),o=(0,u.useRef)(null),p=(0,u.useRef)(null),f=(0,u.useRef)(null),m=(0,u.useRef)(null),j=(0,u.useState)(null),P=(0,t.Z)(j,2),Z=P[0],S=P[1],b=(0,u.useState)(null),C=(0,t.Z)(b,2),w=C[0],y=C[1],R=(0,u.useState)(null),k=(0,t.Z)(R,2),T=k[0],A=k[1],V=(0,i.L)(a.d.TRUCK).scene,D=(0,c.w)((function(n){return n.camera})),U=(0,c.w)((function(n){return n.controls})),I=n.pumpsData.length?n.pumpsData:d.r,_=function(n,e){var o=(0,x.t)();return{copiedScene:(0,u.useMemo)((function(){return n.traverse((function(n){var e;if(n.isMesh){var t,r=n.material,i=null===(e=n.geometry)||void 0===e?void 0:e.boundingSphere.radius;n.material=o||i<200?new h.MeshBasicMaterial({color:r.color}):new h.MeshStandardMaterial({color:r.color,metalness:1,emissive:1,roughness:null!==(t=r.roughness)&&void 0!==t?t:.5})}})),[].forEach((function(n){n.removeFromParent()})),n.clone()}),[n.uuid])}}(V),Y=_.copiedScene,J=(0,c.w)((function(n){return n.invalidate})),K=function(n){return!T||n["Pump Position"]===T["Pump Position"]};(0,u.useEffect)((function(){T&&n.setSelected(T["Pump Position"])}),[T,n]);var W=function(e){return e["Pump Position"]===n.selected},X=I.length/2,q=Z?[Z]:void 0;return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)(L,{children:[I.map((function(e,o){var r=function(n,e,o){return[n<e?15:-15,0+10*o,e%n*5]}(X,o,T&&e["Pump Position"]===T["Pump Position"]),i=(0,t.Z)(r,3),s=i[0],c=i[1],l=i[2];return(0,v.jsx)(en,{position:[s,c,l],onClick:function(){n.setSelected(e["Pump Position"]),J()},onDoubleClick:function(){if(K(e)){var o;null===U||void 0===U||U.saveState();var t={};t.position=D.position.clone(),t.rotation=D.rotation.clone(),t.controlCenter=null===U||void 0===U||null===(o=U.target)||void 0===o?void 0:o.clone(),y(t),n.setSelected(e["Pump Position"]),A(e),D.position.set(4.5*s,c+9,3*l),J()}},onHover:S,isActive:n.selectionOptions["Select All"]||W(e),show:K(e),isFocussed:T&&e["Pump Position"]===T["Pump Position"],scene:Y,pump:e,setAlertedParts:n.setAlertedParts,rotation:X<o?H:E,cloudGlbURL:a.d.TRUCK,scale:T?2:1},e["Pump Position"])})),T?null:(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(g,{ref:o,cloudGlbURL:a.d.MISSILE,assetId:4347,onClick:function(n){return null},onHover:S,position:z}),(0,v.jsx)(M,{ref:p,name:"missile",position:F,connectedTo:[f]}),(0,v.jsx)(g,{ref:f,cloudGlbURL:a.d.WELL_HEAD,onClick:function(n){return null},onHover:S,position:B,scale:5}),(0,v.jsx)(g,{ref:m,cloudGlbURL:a.d.DATA_VAN,onClick:function(n){return null},onHover:S,position:O,rotation:G})]}),e||T?null:(0,v.jsx)(g,{cloudGlbURL:a.d.BLENDER,onClick:function(n){return null},fast:!0,onHover:S,position:N,rotation:E})]}),(0,v.jsx)(l.xC,{multisampling:8,autoClear:!1,children:(0,v.jsx)(l.bw,{selection:q,selectionLayer:1,visibleEdgeColor:"white",edgeStrength:5})}),(0,v.jsx)(s.V,{left:!0,portal:n.domNodeRef,children:T?(0,v.jsx)("div",{children:(0,v.jsx)(r.h,{className:"text-neutralPrimary bg-themeLighterAlt",iconProps:{iconName:"Back"},onClick:function(){A(null),D.position.set(w.position.x,w.position.y,w.position.z),null===U||void 0===U||U.reset(),J(),J()},text:"Back to Frac site"})}):null})]})}}}]);
//# sourceMappingURL=605.bd7767bd.chunk.js.map