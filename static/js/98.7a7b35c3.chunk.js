"use strict";(self.webpackChunkpropetro_site3d=self.webpackChunkpropetro_site3d||[]).push([[98],{98:function(n,e,o){o.r(e),o.d(e,{default:function(){return _}});var r=o(1413),t=o(9439),i=o(3630),s=o(9324),c=o(2791),u=o(7760),a="Solid1_14",l="Solid1_29",d="Solid1_23",p="Solid1_53",m="A_body",h=o(7543),x=o(5132),f=o(8511),j=o(4956),g=o(2935),v=" psi",w=" %",Z=" hp",b=" ",C=o(5410),P=o(184),S=["anchor"],y=new u.Box3,k=new u.Vector3,N=function(n){var e=n.anchor,o=(0,C.Z)(n,S),t=c.useRef(null),i=c.useRef(null);return c.useEffect((function(){var n,e;null!==(n=t.current)&&void 0!==n&&null!==(e=n.parent)&&void 0!==e&&e.parent&&(i.current=t.current.parent,t.current.parent.parent.add(t.current))}),[]),(0,s.x)((function(){if(i.current){y.setFromObject(i.current),y.getSize(k);var n=i.current.position,o=n.pX,r=n.pY,s=n.pZ;o&&r&&s?t.current.position.set(i.current.position.x+k.x*e[0]/2,i.current.position.y+k.y*e[1]/2,i.current.position.z+k.z*e[2]/2):t.current.position.set(i.current.geometry.boundingBox.min.x+e[0],i.current.geometry.boundingBox.min.y+e[1],i.current.geometry.boundingBox.min.z+e[2])}})),(0,P.jsx)("group",(0,r.Z)({ref:t},o))};function O(n){var e=Object.assign({},n),o=a,r=l,t=p,i=d,s=m;return(0,P.jsxs)(P.Fragment,{children:[e.node.name===o&&e.pump["Engine Load"]?(0,P.jsx)(N,{anchor:[0,0,0],children:(0,P.jsx)(j.V,{children:(0,P.jsxs)("div",{className:"content",children:[(0,P.jsx)(f.J,{iconName:"LightningBolt"}),e.pump["Engine Load"]+w]})})}):null,e.node.name===r&&e.pump["Trans Gear"]?(0,P.jsx)(N,{anchor:[1,1,1],children:(0,P.jsx)(j.V,{children:(0,P.jsxs)("div",{className:"content",children:[(0,P.jsx)(f.J,{iconName:"Settings"}),e.pump["Trans Gear"]+b]})})}):null,e.node.name===i&&e.pump["Horse Power"]?(0,P.jsx)(N,{anchor:[0,0,0],children:(0,P.jsx)(j.V,{children:(0,P.jsx)("div",{className:"content",children:e.pump["Horse Power"]+Z})})}):null,e.node.name===t&&e.pump["Pump Rate"]?(0,P.jsx)(N,{anchor:[0,0,0],children:(0,P.jsx)(j.V,{children:(0,P.jsxs)("div",{className:"content",children:[(0,P.jsx)(f.J,{iconName:"Drop"}),e.pump["Pump Rate"]+v]})})}):null,e.node.name===s?(0,P.jsx)(g.L,{anchor:[0,0,0],children:(0,P.jsx)(j.V,{children:(0,P.jsx)("div",{className:"chassis-content",children:e.pump["Pump Position"]})})}):null]})}function B(n){var e=Object.assign({},n),o=(0,c.useRef)(),i=(0,c.useState)(),s=(0,t.Z)(i,2),u=s[0],a=s[1];(0,h.j)(u,"pointer"),(0,x.o)(o);return"mesh"!==e.node.type.toLowerCase()?(0,P.jsx)("group",{rotation:e.node.rotation,position:e.node.position,scale:e.node.scale,frustumCulled:!0,children:e.node.children.length>0&&e.node.children.map((function(n,o){return(0,P.jsx)(B,(0,r.Z)((0,r.Z)({},e),{},{node:n,index:o+e.index}),o+n.name)}))}):"mesh"===e.node.type.toLowerCase()?(0,P.jsxs)("mesh",{geometry:e.node.geometry,material:e.node.material,rotation:e.node.rotation,position:e.node.position,ref:o,scale:e.node.scale,onPointerOver:function(n){n.stopPropagation(),e.show&&(e.onHover(o),a(!0))},onPointerOut:function(){e.show&&(a(!1),e.onHover(null))},onClick:function(n){n.stopPropagation(),e.show&&e.onClick(!0)},onDoubleClick:function(n){n.stopPropagation(),e.show&&e.onDoubleClick()},frustumCulled:!0,children:[e.node.children.length>0&&e.node.children.map((function(n,o){return(0,P.jsx)(B,(0,r.Z)((0,r.Z)({},e),{},{node:n,index:o+e.index}),o+n.name)})),e.isActive?(0,P.jsx)(O,(0,r.Z)({},e)):null]}):void 0}var L=new u.Box3;function _(n){var e=Object.assign({},n),o=(0,c.useRef)();(0,c.useEffect)((function(){L.setFromObject(e.scene)}),[e.scene]);var d=(0,c.useState)(new Set),m=(0,t.Z)(d,2),h=m[0],x=m[1];(0,s.x)((function(){return o.current.visible=e.show}),[]);var f=(0,c.useState)(1),j=(0,t.Z)(f,2),g=j[0],v=(j[1],e.pump),w=a,Z=p,b=l;return(0,c.useEffect)((function(){var n=setInterval((function(){v["Engine Load"]<30&&(new u.Box3Helper(L,65280).material.linewidth=3)}),500);return function(){return clearInterval(n)}}),[v,g,e,w,Z,b]),e.fast?(0,P.jsx)("group",(0,r.Z)((0,r.Z)({ref:o},e),{},{dispose:null,children:(0,P.jsx)(i.P,{box:!0,multiple:!0,onChange:function(n){n[0]&&(console.log(n[0]),e.onHover(n[0]),e.onClick(!0))},children:(0,P.jsx)("primitive",{object:e.scene})})})):(0,P.jsx)("group",(0,r.Z)((0,r.Z)({ref:o},e),{},{dispose:null,rotateOnAxis:{axis:[0,0,0],angle:1.57},frustumCulled:!0,children:e.scene.children.map((function(n,o){return(0,P.jsx)(B,(0,r.Z)((0,r.Z)({},e),{},{node:n,index:o,indexSet:h,setIndexSet:x}),o+n.name)}))}))}}}]);
//# sourceMappingURL=98.7a7b35c3.chunk.js.map