"use strict";(self.webpackChunkpropetro_site3d=self.webpackChunkpropetro_site3d||[]).push([[810],{3810:function(e,n,o){o.r(n),o.d(n,{default:function(){return U}});var t=o(9439),i=o(9093),r=o(3655),s=o(4956),c=o(9324),l=o(5226),u=o(2791),a=o(1697),d=o(9192),f=o(4584),p=o(5647),m=o(3433),h=o(7762),v=o(1413),x=o(5410),P=o(9577),j=o(7760),g=o(184),Z=["children","opacity","radius","segments","color"],S=["color","name","connectedTo","position"],k=(0,u.createContext)(),y=(0,u.forwardRef)((function(e,n){var o=e.children,t=e.opacity,i=void 0===t?1:t,r=e.radius,s=void 0===r?.05:r,c=e.segments,l=void 0===c?32:c,u=e.color,a=void 0===u?"#ff1050":u,d=(0,x.Z)(e,Z);return(0,g.jsxs)("mesh",(0,v.Z)((0,v.Z)({ref:n},d),{},{children:[(0,g.jsx)("circleGeometry",{args:[s,l]}),(0,g.jsx)("meshBasicMaterial",{transparent:i<1,opacity:i,color:a}),o]}))}));function C(e){var n=e.children,o=(0,u.useRef)(),i=(0,u.useState)([]),r=(0,t.Z)(i,2),s=r[0],l=r[1],a=(0,u.useMemo)((function(){var e,n=[],o=(0,h.Z)(s);try{var i=function(){var o=e.value;o.connectedTo.map((function(e){return[o.position,e.current.position]})).forEach((function(e){var o=(0,t.Z)(e,2),i=o[0],r=o[1];return n.push({start:i.clone().add({x:.35,y:0,z:0}),end:r.clone().add({x:-.35,y:0,z:0})})}))};for(o.s();!(e=o.n()).done;)i()}catch(r){o.e(r)}finally{o.f()}return n}),[s]);return(0,c.x)((function(e,n){return o.current.children.forEach((function(e){return e.children[0].material.uniforms.dashOffset.value-=10*n}))})),(0,g.jsxs)(k.Provider,{value:l,children:[(0,g.jsx)("group",{ref:o,children:a.map((function(e,n){return(0,g.jsxs)("group",{children:[(0,g.jsx)(P.R,(0,v.Z)((0,v.Z)({},e),{},{color:"white",dashed:!0,dashScale:50,gapSize:20}),n+"Bezier spot"),(0,g.jsx)(P.R,(0,v.Z)((0,v.Z)({},e),{},{color:"red",lineWidth:3,transparent:!0,opacity:.5}),n+"Bezier line")]})}))}),n,a.map((function(e,n){var o=e.start,t=e.end;return(0,g.jsxs)("group",{"position-z":1,children:[(0,g.jsx)(y,{position:o}),(0,g.jsx)(y,{position:t})]},n+"Bezier circle")}))]})}var R=(0,u.forwardRef)((function(e,n){var o=e.color,i=void 0===o?"black":o,r=(e.name,e.connectedTo),s=void 0===r?[]:r,c=e.position,l=void 0===c?[0,0,0]:c,a=(0,x.Z)(e,S),d=(0,u.useContext)(k),f=(0,u.useState)((function(){return(0,p.Z)(j.Vector3,(0,m.Z)(l))})),h=(0,t.Z)(f,1)[0],P=(0,u.useMemo)((function(){return{position:h,connectedTo:s}}),[h,s]);return(0,u.useLayoutEffect)((function(){return d((function(e){return[].concat((0,m.Z)(e),[P])})),function(){d((function(e){return e.filter((function(e){return e!==P}))}))}}),[P,h,d]),(0,g.jsx)(y,(0,v.Z)({ref:n,opacity:.2,radius:.5,color:i,position:h},a))})),b=o(7577),w=[0,-Math.PI/2,0],M=[0,Math.PI/2,0],L=[0,-1,-20],z=[15,1,-10],A=[0,0,20],E=[0,1,20],T=[0,Math.PI/2,0],B=(0,u.memo)((0,u.lazy)((function(){return Promise.all([o.e(956),o.e(529)]).then(o.bind(o,529))}))),I=(0,u.lazy)((function(){return o.e(276).then(o.bind(o,4276))}));var U=function(e){var n=(0,u.useRef)(null),o=(0,u.useRef)(null),p=(0,u.useRef)(null),m=(0,u.useRef)(null),h=(0,u.useState)(null),v=(0,t.Z)(h,2),x=v[0],P=v[1],Z=(0,u.useState)(null),S=(0,t.Z)(Z,2),k=S[0],y=S[1],U=(0,u.useState)(null),D=(0,t.Z)(U,2),F=D[0],G=D[1],H=(0,r.L)(a.d.TRUCK).scene,N=(0,c.w)((function(e){return e.camera})),_=(0,c.w)((function(e){return e.controls})),V=e.pumpsData.length?e.pumpsData:d.r,K=function(e,n){var o=(0,b.t)();return{copiedScene:(0,u.useMemo)((function(){return e.traverse((function(e){var n;if(e.isMesh){var t,i=e.material,r=null===(n=e.geometry)||void 0===n?void 0:n.boundingSphere.radius;e.material=o||r<200?new j.MeshBasicMaterial({color:i.color}):new j.MeshStandardMaterial({color:i.color,metalness:1,emissive:1,roughness:null!==(t=i.roughness)&&void 0!==t?t:.5})}})),[].forEach((function(e){e.removeFromParent()})),e.clone()}),[e.uuid])}}(H),O=K.copiedScene,W=(0,c.w)((function(e){return e.invalidate})),q=function(e){return!F||e["Pump Position"]===F["Pump Position"]};(0,u.useEffect)((function(){F&&e.setSelected(F["Pump Position"])}),[F,e]);var J=function(n){return n["Pump Position"]===e.selected},Q=V.length/2,X=x?[x]:void 0;return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)(C,{children:[(0,g.jsx)(u.Suspense,{fallback:(0,g.jsx)(f.Z,{}),children:V.map((function(n,o){var i=function(e,n,o){return[e<n?15:-15,0+10*o,n%e*5]}(Q,o,F&&n["Pump Position"]===F["Pump Position"]),r=(0,t.Z)(i,3),s=r[0],c=r[1],l=r[2];return(0,g.jsx)(B,{position:[s,c,l],onClick:function(){e.setSelected(n["Pump Position"]),W()},onDoubleClick:function(){if(q(n)){var o;null===_||void 0===_||_.saveState();var t={};t.position=N.position.clone(),t.rotation=N.rotation.clone(),t.controlCenter=null===_||void 0===_||null===(o=_.target)||void 0===o?void 0:o.clone(),y(t),e.setSelected(n["Pump Position"]),G(n),N.position.set(4.5*s,c+9,3*l),W()}},onHover:P,isActive:e.selectionOptions["Select All"]||J(n),show:q(n),isFocussed:F&&n["Pump Position"]===F["Pump Position"],scene:O,pump:n,setAlertedParts:e.setAlertedParts,rotation:Q<o?w:M,cloudGlbURL:a.d.TRUCK,scale:F?2:1},n["Pump Position"])}))}),F?null:(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(I,{ref:n,cloudGlbURL:a.d.MISSILE,assetId:4347,onClick:function(e){console.log("clicked on missile")},onHover:P,position:A}),(0,g.jsx)(R,{ref:o,name:"missile",position:E,connectedTo:[p]}),(0,g.jsx)(I,{ref:p,cloudGlbURL:a.d.WELL_HEAD,onClick:function(e){console.log("clicked on missile")},onHover:P,position:L,scale:5}),(0,g.jsx)(I,{ref:m,cloudGlbURL:a.d.DATA_VAN,onClick:function(e){console.log("clicked on missile")},onHover:P,position:z,rotation:T})]})]}),(0,g.jsx)(l.xC,{multisampling:8,autoClear:!1,children:(0,g.jsx)(l.bw,{selection:X,selectionLayer:1,visibleEdgeColor:"white",edgeStrength:5})}),(0,g.jsx)(s.V,{left:!0,portal:e.domNodeRef,children:F?(0,g.jsx)("div",{children:(0,g.jsx)(i.h,{className:"text-neutralPrimary bg-themeLighterAlt",iconProps:{iconName:"Back"},onClick:function(){G(null),N.position.set(k.position.x,k.position.y,k.position.z),null===_||void 0===_||_.reset(),W(),W()},text:"Back to Frac site"})}):null})]})}}}]);
//# sourceMappingURL=810.ca83617f.chunk.js.map