"use strict";(self.webpackChunkpropetro_site3d=self.webpackChunkpropetro_site3d||[]).push([[810],{3810:function(e,n,o){o.r(n),o.d(n,{default:function(){return G}});var t=o(9439),i=o(9093),r=o(3655),s=o(4956),c=o(9324),l=o(5226),u=o(2791),a=o(1697),d=o(9192),f=o(4584),p=o(5647),m=o(3433),h=o(7762),v=o(1413),x=o(5410),P=o(9577),j=o(7760),g=o(184),Z=["children","opacity","radius","segments","color"],S=["color","name","connectedTo","position"],k=(0,u.createContext)(),R=(0,u.forwardRef)((function(e,n){var o=e.children,t=e.opacity,i=void 0===t?1:t,r=e.radius,s=void 0===r?.05:r,c=e.segments,l=void 0===c?32:c,u=e.color,a=void 0===u?"#ff1050":u,d=(0,x.Z)(e,Z);return(0,g.jsxs)("mesh",(0,v.Z)((0,v.Z)({ref:n},d),{},{children:[(0,g.jsx)("circleGeometry",{args:[s,l]}),(0,g.jsx)("meshBasicMaterial",{transparent:i<1,opacity:i,color:a}),o]}))}));function b(e){var n=e.children,o=(0,u.useRef)(),i=(0,u.useState)([]),r=(0,t.Z)(i,2),s=r[0],l=r[1],a=(0,u.useMemo)((function(){var e,n=[],o=(0,h.Z)(s);try{var i=function(){var o=e.value;o.connectedTo.map((function(e){return[o.position,e.current.position]})).forEach((function(e){var o=(0,t.Z)(e,2),i=o[0],r=o[1];return n.push({start:i.clone().add({x:.35,y:0,z:0}),end:r.clone().add({x:-.35,y:0,z:0})})}))};for(o.s();!(e=o.n()).done;)i()}catch(r){o.e(r)}finally{o.f()}return n}),[s]);return(0,c.x)((function(e,n){return o.current.children.forEach((function(e){return e.children[0].material.uniforms.dashOffset.value-=10*n}))})),(0,g.jsxs)(k.Provider,{value:l,children:[(0,g.jsx)("group",{ref:o,children:a.map((function(e,n){return(0,g.jsxs)("group",{children:[(0,g.jsx)(P.R,(0,v.Z)((0,v.Z)({},e),{},{color:"white",dashed:!0,dashScale:50,gapSize:20}),n+"Bezier spot"),(0,g.jsx)(P.R,(0,v.Z)((0,v.Z)({},e),{},{color:"red",lineWidth:3,transparent:!0,opacity:.5}),n+"Bezier line")]})}))}),n,a.map((function(e,n){var o=e.start,t=e.end;return(0,g.jsxs)("group",{"position-z":1,children:[(0,g.jsx)(R,{position:o}),(0,g.jsx)(R,{position:t})]},n+"Bezier circle")}))]})}var y=(0,u.forwardRef)((function(e,n){var o=e.color,i=void 0===o?"black":o,r=(e.name,e.connectedTo),s=void 0===r?[]:r,c=e.position,l=void 0===c?[0,0,0]:c,a=(0,x.Z)(e,S),d=(0,u.useContext)(k),f=(0,u.useState)((function(){return(0,p.Z)(j.Vector3,(0,m.Z)(l))})),h=(0,t.Z)(f,1)[0],P=(0,u.useMemo)((function(){return{position:h,connectedTo:s}}),[h,s]);return(0,u.useLayoutEffect)((function(){return d((function(e){return[].concat((0,m.Z)(e),[P])})),function(){d((function(e){return e.filter((function(e){return e!==P}))}))}}),[P,h,d]),(0,g.jsx)(R,(0,v.Z)({ref:n,opacity:.2,radius:.5,color:i,position:h},a))})),C=o(7577),w=[0,-Math.PI/2,0],L=[0,Math.PI/2,0],M=[0,-1,-20],E=[15,1,-10],z=[10,-1,35],A=[0,0,20],B=[0,1,20],T=[0,Math.PI/2,0],U=(0,u.memo)((0,u.lazy)((function(){return Promise.all([o.e(956),o.e(529)]).then(o.bind(o,529))}))),D=(0,u.lazy)((function(){return o.e(276).then(o.bind(o,4276))}));var G=function(e){var n=(0,u.useRef)(null),o=(0,u.useRef)(null),p=(0,u.useRef)(null),m=(0,u.useRef)(null),h=(0,u.useState)(null),v=(0,t.Z)(h,2),x=v[0],P=v[1],Z=(0,u.useState)(null),S=(0,t.Z)(Z,2),k=S[0],R=S[1],G=(0,u.useState)(null),H=(0,t.Z)(G,2),I=H[0],F=H[1],N=(0,r.L)(a.d.TRUCK).scene,_=(0,c.w)((function(e){return e.camera})),V=(0,c.w)((function(e){return e.controls})),K=e.pumpsData.length?e.pumpsData:d.r,O=function(e,n){var o=(0,C.t)();return{copiedScene:(0,u.useMemo)((function(){return e.traverse((function(e){var n;if(e.isMesh){var t,i=e.material,r=null===(n=e.geometry)||void 0===n?void 0:n.boundingSphere.radius;e.material=o||r<200?new j.MeshBasicMaterial({color:i.color}):new j.MeshStandardMaterial({color:i.color,metalness:1,emissive:1,roughness:null!==(t=i.roughness)&&void 0!==t?t:.5})}})),[].forEach((function(e){e.removeFromParent()})),e.clone()}),[e.uuid])}}(N),W=O.copiedScene,q=(0,c.w)((function(e){return e.invalidate})),J=function(e){return!I||e["Pump Position"]===I["Pump Position"]};(0,u.useEffect)((function(){I&&e.setSelected(I["Pump Position"])}),[I,e]);var Q=function(n){return n["Pump Position"]===e.selected},X=K.length/2,Y=x?[x]:void 0;return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)(b,{children:[(0,g.jsx)(u.Suspense,{fallback:(0,g.jsx)(f.Z,{}),children:K.map((function(n,o){var i=function(e,n,o){return[e<n?15:-15,0+10*o,n%e*5]}(X,o,I&&n["Pump Position"]===I["Pump Position"]),r=(0,t.Z)(i,3),s=r[0],c=r[1],l=r[2];return(0,g.jsx)(U,{position:[s,c,l],onClick:function(){e.setSelected(n["Pump Position"]),q()},onDoubleClick:function(){if(J(n)){var o;null===V||void 0===V||V.saveState();var t={};t.position=_.position.clone(),t.rotation=_.rotation.clone(),t.controlCenter=null===V||void 0===V||null===(o=V.target)||void 0===o?void 0:o.clone(),R(t),e.setSelected(n["Pump Position"]),F(n),_.position.set(4.5*s,c+9,3*l),q()}},onHover:P,isActive:e.selectionOptions["Select All"]||Q(n),show:J(n),isFocussed:I&&n["Pump Position"]===I["Pump Position"],scene:W,pump:n,setAlertedParts:e.setAlertedParts,rotation:X<o?w:L,cloudGlbURL:a.d.TRUCK,scale:I?2:1},n["Pump Position"])}))}),I?null:(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(D,{ref:n,cloudGlbURL:a.d.MISSILE,assetId:4347,onClick:function(e){console.log("clicked on missile")},onHover:P,position:A}),(0,g.jsx)(y,{ref:o,name:"missile",position:B,connectedTo:[p]}),(0,g.jsx)(D,{ref:p,cloudGlbURL:a.d.WELL_HEAD,onClick:function(e){console.log("clicked on missile")},onHover:P,position:M,scale:5}),(0,g.jsx)(D,{ref:m,cloudGlbURL:a.d.DATA_VAN,onClick:function(e){console.log("clicked on missile")},onHover:P,position:E,rotation:T}),(0,g.jsx)(u.Suspense,{fallback:(0,g.jsx)(f.Z,{}),children:(0,g.jsx)(D,{cloudGlbURL:a.d.BLENDER,onClick:function(e){console.log("clicked on missile")},fast:!0,onHover:P,position:z,rotation:L})})]})]}),(0,g.jsx)(l.xC,{multisampling:8,autoClear:!1,children:(0,g.jsx)(l.bw,{selection:Y,selectionLayer:1,visibleEdgeColor:"white",edgeStrength:5})}),(0,g.jsx)(s.V,{left:!0,portal:e.domNodeRef,children:I?(0,g.jsx)("div",{children:(0,g.jsx)(i.h,{className:"text-neutralPrimary bg-themeLighterAlt",iconProps:{iconName:"Back"},onClick:function(){F(null),_.position.set(k.position.x,k.position.y,k.position.z),null===V||void 0===V||V.reset(),q(),q()},text:"Back to Frac site"})}):null})]})}}}]);
//# sourceMappingURL=810.56fa488b.chunk.js.map